(()=>{var e={990:(e,t,r)=>{r(2773),r(5645).Array.includes},1632:(e,t,r)=>{r(5115),e.exports=r(5645).Object.assign},8135:(e,t,r)=>{r(6253),r(9115),r(1181),r(851),r(9865),r(1898),r(5645).Promise},4963:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},7722:(e,t,r)=>{var o=r(6314)("unscopables"),n=Array.prototype;null==n[o]&&r(7728)(n,o,{}),e.exports=function(e){n[o][e]=!0}},3328:e=>{e.exports=function(e,t,r,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(r+": incorrect invocation!");return e}},7007:(e,t,r)=>{var o=r(5286);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},9315:(e,t,r)=>{var o=r(2110),n=r(875),i=r(2337);e.exports=function(e){return function(t,r,s){var a,c=o(t),u=n(c.length),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},1488:(e,t,r)=>{var o=r(2032),n=r(6314)("toStringTag"),i="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?r:i?o(t):"Object"==(s=o(t))&&"function"==typeof t.callee?"Arguments":s}},2032:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5645:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},741:(e,t,r)=>{var o=r(4963);e.exports=function(e,t,r){if(o(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,o){return e.call(t,r,o)};case 3:return function(r,o,n){return e.call(t,r,o,n)}}return function(){return e.apply(t,arguments)}}},1355:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7057:(e,t,r)=>{e.exports=!r(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(e,t,r)=>{var o=r(5286),n=r(3816).document,i=o(n)&&o(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},4430:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2985:(e,t,r)=>{var o=r(3816),n=r(5645),i=r(7728),s=r(7234),a=r(741),c=function(e,t,r){var u,l,f,h,p=e&c.F,d=e&c.G,g=e&c.S,v=e&c.P,y=e&c.B,m=d?o:g?o[t]||(o[t]={}):(o[t]||{}).prototype,_=d?n:n[t]||(n[t]={}),w=_.prototype||(_.prototype={});for(u in d&&(r=t),r)f=((l=!p&&m&&void 0!==m[u])?m:r)[u],h=y&&l?a(f,o):v&&"function"==typeof f?a(Function.call,f):f,m&&s(m,u,f,e&c.U),_[u]!=f&&i(_,u,h),v&&w[u]!=f&&(w[u]=f)};o.core=n,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},4253:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},3531:(e,t,r)=>{var o=r(741),n=r(8851),i=r(6555),s=r(7007),a=r(875),c=r(9002),u={},l={},f=e.exports=function(e,t,r,f,h){var p,d,g,v,y=h?function(){return e}:c(e),m=o(r,f,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(p=a(e.length);p>_;_++)if((v=t?m(s(d=e[_])[0],d[1]):m(e[_]))===u||v===l)return v}else for(g=y.call(e);!(d=g.next()).done;)if((v=n(g,m,d.value,t))===u||v===l)return v};f.BREAK=u,f.RETURN=l},18:(e,t,r)=>{e.exports=r(3825)("native-function-to-string",Function.toString)},3816:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},9181:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},7728:(e,t,r)=>{var o=r(9275),n=r(681);e.exports=r(7057)?function(e,t,r){return o.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},639:(e,t,r)=>{var o=r(3816).document;e.exports=o&&o.documentElement},1734:(e,t,r)=>{e.exports=!r(7057)&&!r(4253)((function(){return 7!=Object.defineProperty(r(2457)("div"),"a",{get:function(){return 7}}).a}))},7242:e=>{e.exports=function(e,t,r){var o=void 0===r;switch(t.length){case 0:return o?e():e.call(r);case 1:return o?e(t[0]):e.call(r,t[0]);case 2:return o?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},9797:(e,t,r)=>{var o=r(2032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},6555:(e,t,r)=>{var o=r(2803),n=r(6314)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[n]===e)}},5286:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8851:(e,t,r)=>{var o=r(7007);e.exports=function(e,t,r,n){try{return n?t(o(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},9988:(e,t,r)=>{"use strict";var o=r(2503),n=r(681),i=r(2943),s={};r(7728)(s,r(6314)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=o(s,{next:n(1,r)}),i(e,t+" Iterator")}},2923:(e,t,r)=>{"use strict";var o=r(4461),n=r(2985),i=r(7234),s=r(7728),a=r(2803),c=r(9988),u=r(2943),l=r(468),f=r(6314)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",d="values",g=function(){return this};e.exports=function(e,t,r,v,y,m,_){c(r,t,v);var w,x,S,b=function(e){if(!h&&e in L)return L[e];switch(e){case p:case d:return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",T=y==d,O=!1,L=e.prototype,j=L[f]||L["@@iterator"]||y&&L[y],E=j||b(y),I=y?T?b("entries"):E:void 0,P="Array"==t&&L.entries||j;if(P&&(S=l(P.call(new e)))!==Object.prototype&&S.next&&(u(S,k,!0),o||"function"==typeof S[f]||s(S,f,g)),T&&j&&j.name!==d&&(O=!0,E=function(){return j.call(this)}),o&&!_||!h&&!O&&L[f]||s(L,f,E),a[t]=E,a[k]=g,y)if(w={values:T?E:b(d),keys:m?E:b(p),entries:I},_)for(x in w)x in L||i(L,x,w[x]);else n(n.P+n.F*(h||O),t,w);return w}},7462:(e,t,r)=>{var o=r(6314)("iterator"),n=!1;try{var i=[7][o]();i.return=function(){n=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var i=[7],s=i[o]();s.next=function(){return{done:r=!0}},i[o]=function(){return s},e(i)}catch(e){}return r}},5436:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},2803:e=>{e.exports={}},4461:e=>{e.exports=!1},4351:(e,t,r)=>{var o=r(3816),n=r(4193).set,i=o.MutationObserver||o.WebKitMutationObserver,s=o.process,a=o.Promise,c="process"==r(2032)(s);e.exports=function(){var e,t,r,u=function(){var o,n;for(c&&(o=s.domain)&&o.exit();e;){n=e.fn,e=e.next;try{n()}catch(o){throw e?r():t=void 0,o}}t=void 0,o&&o.enter()};if(c)r=function(){s.nextTick(u)};else if(!i||o.navigator&&o.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);r=function(){l.then(u)}}else r=function(){n.call(o,u)};else{var f=!0,h=document.createTextNode("");new i(u).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(o){var n={fn:o,next:void 0};t&&(t.next=n),e||(e=n,r()),t=n}}},3499:(e,t,r)=>{"use strict";var o=r(4963);function n(e){var t,r;this.promise=new e((function(e,o){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=o})),this.resolve=o(t),this.reject=o(r)}e.exports.f=function(e){return new n(e)}},5345:(e,t,r)=>{"use strict";var o=r(7057),n=r(7184),i=r(4548),s=r(4682),a=r(508),c=r(9797),u=Object.assign;e.exports=!u||r(4253)((function(){var e={},t={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=o}))?function(e,t){for(var r=a(e),u=arguments.length,l=1,f=i.f,h=s.f;u>l;)for(var p,d=c(arguments[l++]),g=f?n(d).concat(f(d)):n(d),v=g.length,y=0;v>y;)p=g[y++],o&&!h.call(d,p)||(r[p]=d[p]);return r}:u},2503:(e,t,r)=>{var o=r(7007),n=r(5588),i=r(4430),s=r(9335)("IE_PROTO"),a=function(){},c=function(){var e,t=r(2457)("iframe"),o=i.length;for(t.style.display="none",r(639).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;o--;)delete c.prototype[i[o]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=o(e),r=new a,a.prototype=null,r[s]=e):r=c(),void 0===t?r:n(r,t)}},9275:(e,t,r)=>{var o=r(7007),n=r(1734),i=r(1689),s=Object.defineProperty;t.f=r(7057)?Object.defineProperty:function(e,t,r){if(o(e),t=i(t,!0),o(r),n)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},5588:(e,t,r)=>{var o=r(9275),n=r(7007),i=r(7184);e.exports=r(7057)?Object.defineProperties:function(e,t){n(e);for(var r,s=i(t),a=s.length,c=0;a>c;)o.f(e,r=s[c++],t[r]);return e}},4548:(e,t)=>{t.f=Object.getOwnPropertySymbols},468:(e,t,r)=>{var o=r(9181),n=r(508),i=r(9335)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},189:(e,t,r)=>{var o=r(9181),n=r(2110),i=r(9315)(!1),s=r(9335)("IE_PROTO");e.exports=function(e,t){var r,a=n(e),c=0,u=[];for(r in a)r!=s&&o(a,r)&&u.push(r);for(;t.length>c;)o(a,r=t[c++])&&(~i(u,r)||u.push(r));return u}},7184:(e,t,r)=>{var o=r(189),n=r(4430);e.exports=Object.keys||function(e){return o(e,n)}},4682:(e,t)=>{t.f={}.propertyIsEnumerable},188:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},94:(e,t,r)=>{var o=r(7007),n=r(5286),i=r(3499);e.exports=function(e,t){if(o(e),n(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},681:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4408:(e,t,r)=>{var o=r(7234);e.exports=function(e,t,r){for(var n in t)o(e,n,t[n],r);return e}},7234:(e,t,r)=>{var o=r(3816),n=r(7728),i=r(9181),s=r(3953)("src"),a=r(18),c="toString",u=(""+a).split(c);r(5645).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,r,a){var c="function"==typeof r;c&&(i(r,"name")||n(r,"name",t)),e[t]!==r&&(c&&(i(r,s)||n(r,s,e[t]?""+e[t]:u.join(String(t)))),e===o?e[t]=r:a?e[t]?e[t]=r:n(e,t,r):(delete e[t],n(e,t,r)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},2974:(e,t,r)=>{"use strict";var o=r(3816),n=r(9275),i=r(7057),s=r(6314)("species");e.exports=function(e){var t=o[e];i&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},2943:(e,t,r)=>{var o=r(9275).f,n=r(9181),i=r(6314)("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,i)&&o(e,i,{configurable:!0,value:t})}},9335:(e,t,r)=>{var o=r(3825)("keys"),n=r(3953);e.exports=function(e){return o[e]||(o[e]=n(e))}},3825:(e,t,r)=>{var o=r(5645),n=r(3816),i="__core-js_shared__",s=n[i]||(n[i]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:r(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8364:(e,t,r)=>{var o=r(7007),n=r(4963),i=r(6314)("species");e.exports=function(e,t){var r,s=o(e).constructor;return void 0===s||null==(r=o(s)[i])?t:n(r)}},4496:(e,t,r)=>{var o=r(1467),n=r(1355);e.exports=function(e){return function(t,r){var i,s,a=String(n(t)),c=o(r),u=a.length;return c<0||c>=u?e?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):i:e?a.slice(c,c+2):s-56320+(i-55296<<10)+65536}}},4193:(e,t,r)=>{var o,n,i,s=r(741),a=r(7242),c=r(639),u=r(2457),l=r(3816),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,g=l.Dispatch,v=0,y={},m=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){m.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++v]=function(){a("function"==typeof e?e:Function(e),t)},o(v),v},p=function(e){delete y[e]},"process"==r(2032)(f)?o=function(e){f.nextTick(s(m,e,1))}:g&&g.now?o=function(e){g.now(s(m,e,1))}:d?(i=(n=new d).port2,n.port1.onmessage=_,o=s(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(o=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):o="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),m.call(e)}}:function(e){setTimeout(s(m,e,1),0)}),e.exports={set:h,clear:p}},2337:(e,t,r)=>{var o=r(1467),n=Math.max,i=Math.min;e.exports=function(e,t){return(e=o(e))<0?n(e+t,0):i(e,t)}},1467:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},2110:(e,t,r)=>{var o=r(9797),n=r(1355);e.exports=function(e){return o(n(e))}},875:(e,t,r)=>{var o=r(1467),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},508:(e,t,r)=>{var o=r(1355);e.exports=function(e){return Object(o(e))}},1689:(e,t,r)=>{var o=r(5286);e.exports=function(e,t){if(!o(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!o(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!o(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!o(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},3953:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},575:(e,t,r)=>{var o=r(3816).navigator;e.exports=o&&o.userAgent||""},6314:(e,t,r)=>{var o=r(3825)("wks"),n=r(3953),i=r(3816).Symbol,s="function"==typeof i;(e.exports=function(e){return o[e]||(o[e]=s&&i[e]||(s?i:n)("Symbol."+e))}).store=o},9002:(e,t,r)=>{var o=r(1488),n=r(6314)("iterator"),i=r(2803);e.exports=r(5645).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[o(e)]}},6997:(e,t,r)=>{"use strict";var o=r(7722),n=r(5436),i=r(2803),s=r(2110);e.exports=r(2923)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},5115:(e,t,r)=>{var o=r(2985);o(o.S+o.F,"Object",{assign:r(5345)})},6253:(e,t,r)=>{"use strict";var o=r(1488),n={};n[r(6314)("toStringTag")]="z",n+""!="[object z]"&&r(7234)(Object.prototype,"toString",(function(){return"[object "+o(this)+"]"}),!0)},851:(e,t,r)=>{"use strict";var o,n,i,s,a=r(4461),c=r(3816),u=r(741),l=r(1488),f=r(2985),h=r(5286),p=r(4963),d=r(3328),g=r(3531),v=r(8364),y=r(4193).set,m=r(4351)(),_=r(3499),w=r(188),x=r(575),S=r(94),b="Promise",k=c.TypeError,T=c.process,O=T&&T.versions,L=O&&O.v8||"",j=c.Promise,E="process"==l(T),I=function(){},P=n=_.f,A=!!function(){try{var e=j.resolve(1),t=(e.constructor={})[r(6314)("species")]=function(e){e(I,I)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==L.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var r=e._c;m((function(){for(var o=e._v,n=1==e._s,i=0,s=function(t){var r,i,s,a=n?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(n||(2==e._h&&M(e),e._h=1),!0===a?r=o:(l&&l.enter(),r=a(o),l&&(l.exit(),s=!0)),r===t.promise?u(k("Promise-chain cycle")):(i=R(r))?i.call(r,c,u):c(r)):u(o)}catch(e){l&&!s&&l.exit(),u(e)}};r.length>i;)s(r[i++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){y.call(c,(function(){var t,r,o,n=e._v,i=q(e);if(i&&(t=w((function(){E?T.emit("unhandledRejection",n,e):(r=c.onunhandledrejection)?r({promise:e,reason:n}):(o=c.console)&&o.error&&o.error("Unhandled promise rejection",n)})),e._h=E||q(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},q=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){y.call(c,(function(){var t;E?T.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},V=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=R(e))?m((function(){var o={_w:r,_d:!1};try{t.call(e,u(V,o,1),u(N,o,1))}catch(e){N.call(o,e)}})):(r._v=e,r._s=1,C(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};A||(j=function(e){d(this,j,b,"_h"),p(e),o.call(this);try{e(u(V,this,1),u(N,this,1))}catch(e){N.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(4408)(j.prototype,{then:function(e,t){var r=P(v(this,j));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=E?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&C(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new o;this.promise=e,this.resolve=u(V,e,1),this.reject=u(N,e,1)},_.f=P=function(e){return e===j||e===s?new i(e):n(e)}),f(f.G+f.W+f.F*!A,{Promise:j}),r(2943)(j,b),r(2974)(b),s=r(5645).Promise,f(f.S+f.F*!A,b,{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(a||!A),b,{resolve:function(e){return S(a&&this===s?j:this,e)}}),f(f.S+f.F*!(A&&r(7462)((function(e){j.all(e).catch(I)}))),b,{all:function(e){var t=this,r=P(t),o=r.resolve,n=r.reject,i=w((function(){var r=[],i=0,s=1;g(e,!1,(function(e){var a=i++,c=!1;r.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,r[a]=e,--s||o(r))}),n)})),--s||o(r)}));return i.e&&n(i.v),r.promise},race:function(e){var t=this,r=P(t),o=r.reject,n=w((function(){g(e,!1,(function(e){t.resolve(e).then(r.resolve,o)}))}));return n.e&&o(n.v),r.promise}})},9115:(e,t,r)=>{"use strict";var o=r(4496)(!0);r(2923)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=o(t,r),this._i+=e.length,{value:e,done:!1})}))},2773:(e,t,r)=>{"use strict";var o=r(2985),n=r(9315)(!0);o(o.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(7722)("includes")},9865:(e,t,r)=>{"use strict";var o=r(2985),n=r(5645),i=r(3816),s=r(8364),a=r(94);o(o.P+o.R,"Promise",{finally:function(e){var t=s(this,n.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then((function(){return r}))}:e,r?function(r){return a(t,e()).then((function(){throw r}))}:e)}})},1898:(e,t,r)=>{"use strict";var o=r(2985),n=r(3499),i=r(188);o(o.S,"Promise",{try:function(e){var t=n.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},1181:(e,t,r)=>{for(var o=r(6997),n=r(7184),i=r(7234),s=r(3816),a=r(7728),c=r(2803),u=r(6314),l=u("iterator"),f=u("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=n(p),g=0;g<d.length;g++){var v,y=d[g],m=p[y],_=s[y],w=_&&_.prototype;if(w&&(w[l]||a(w,l,h),w[f]||a(w,f,y),c[y]=h,m))for(v in o)w[v]||i(w,v,o[v],!0)}},854:e=>{"use strict";e.exports=JSON.parse('{"name":"jso","version":"4.1.1","description":"OAuth 2.0 implementation in Javascript","main":"dist/jso.js","module":"src/JSO.js","scripts":{"test":"true","preversion":"npm test","version":"npm run build && git add -A dist","postversion":"git push && git push --tags && npm publish","build":"webpack --mode production --config webpack.config.js"},"babel":{"presets":["env"]},"repository":{"type":"git","url":"https://github.com/andreassolberg/jso.git"},"keywords":["oauth","authentication","authorization","rest","api","ajax","jquery"],"files":["src"],"eslintConfig":{"env":{"es6":true,"browser":true,"node":false}},"devDependencies":{"babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-react":"^6.24.1","qunit":"^2.5.1","webpack":"^4.1.1","webpack-cli":"^2.0.12"},"author":"Andreas Åkre Solberg","license":"LGPL-2.1","bugs":{"url":"https://github.com/andreassolberg/jso/issues"},"homepage":"https://github.com/andreassolberg/jso","dependencies":{}}')}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(1632),t=r.n(e);r(990),r(8135);let o={epoch:function(){return Math.round((new Date).getTime()/1e3)},debug:!1,uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},getResponseFromURL:function(e){return-1!==e.indexOf("#")?o.parseQueryString(e.substring(e.indexOf("#")+1)):-1!==e.indexOf("?")?o.parseQueryString(e.substring(e.indexOf("?")+1)):{}},parseQueryString:function(e){for(var t,r=/\+/g,o=/([^&;=]+)=?([^&;]*)/g,n=function(e){return decodeURIComponent(e.replace(r," "))},i=e,s={};t=o.exec(i);)s[n(t[1])]=n(t[2]);return s},scopeList:function(e){return o.uniqueList(e).join(" ")},uniqueList:function(e){for(var t={},r=[],o=0;o<e.length;o++)t[e[o]]=1;for(var n in t)t.hasOwnProperty(n)&&r.push(n);return r},log:function(e){if(!console)return;if(!console.log)return;if(!o.debug)return;let t=Array.prototype.slice.call(arguments);t.unshift("[JSO]"),console.log.apply(console,t)},encodeQS:function(e){let t="";var r,o=0;for(r in e)t+=(0==o++?"":"&")+encodeURIComponent(r)+"="+encodeURIComponent(e[r]);return t},encodeURL:function(e,t){var r,o=e,n=0,i=-1===e.indexOf("?")?"?":"&";for(r in t)o+=(0==n++?i:"&")+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);return o}};const n=o,i=new class{constructor(){}saveState(e,t){localStorage.setItem("state-"+e,JSON.stringify(t))}getState(e){var t=JSON.parse(localStorage.getItem("state-"+e));return localStorage.removeItem("state-"+e),t}hasScope(e,t){var r;if(!e.scopes)return!1;for(r=0;r<e.scopes.length;r++)if(e.scopes[r]===t)return!0;return!1}filterTokens(e,t){var r,o,i,s=[],a=n.epoch();for(t||(t=[]),r=0;r<e.length;r++){for(i=!0,e[r].expires&&e[r].expires<a+1&&(i=!1),o=0;o<t.length;o++)this.hasScope(e[r],t[o])||(i=!1);i&&s.push(e[r])}return s}saveTokens(e,t){localStorage.setItem("tokens-"+e,JSON.stringify(t))}getTokens(e){var t=JSON.parse(localStorage.getItem("tokens-"+e));return t||(t=[]),n.log("Token found when loooking up provider "+e+" in store "+window.location.href,t),t}wipeTokens(e){localStorage.removeItem("tokens-"+e)}saveToken(e,t){var r=this.getTokens(e);(r=this.filterTokens(r)).push(t),this.saveTokens(e,r)}getToken(e,t){var r=this.getTokens(e);return(r=this.filterTokens(r,t)).length<1?null:r[0]}};class s{constructor(e){console.log("Initializing a loader with url "+e),this.url=e}execute(){}}class a extends s{execute(){return new Promise(((e,t)=>{window.location=this.url}))}}class c extends class{constructor(e){for(var t in e)this[t]=e[t]}set(e,t){return this[e]=t,this}}{toString(){return"OAuthResponseError: ["+(this.error||"unknown")+"]: "+(this.error_description||"unknown")}}class u{constructor(){this.config={};for(var e=0;e<arguments.length;e++)Object.assign(this.config,arguments[e])}has(e){var t=this.config,r=e.split("."),o=0;for(o=0;o<r.length;o++){if(!t.hasOwnProperty(r[o]))return!1;t=t[r[o]]}return!0}getValue(e,t,r){r=r||!1;var o=this.config,n=e.split("."),i=0;for(i=0;i<n.length;i++){if(!o.hasOwnProperty(n[i])){o=void 0;break}o=o[n[i]]}if(void 0===o){if(r)throw new Error("Configuration option ["+n[i]+"] required but not provided.");return t}return o}}r(854);const l={lifetime:3600};class f extends class{on(e,t){this._callbacks||(this._callbacks={}),this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t)}emit(e){this._callbacks||(this._callbacks={}),this._callbacks[e]||(this._callbacks[e]=[]);for(var t=Array.prototype.slice.call(arguments,1),r=0;r<this._callbacks[e].length;r++)this._callbacks[e][r].apply(this,t)}}{constructor(e){super(),this.configure(e),this.providerID=this.getProviderID(),this.Loader=a,this.store=i,this.callbacks={},this.config.getValue("debug",!1)&&(n.debug=!0)}configure(e){this.config=new u(l,e)}setStore(e){this.store=e}setLoader(e){if("function"!=typeof e)throw new Error("loader MUST be an instance of the JSO BasicLoader");this.Loader=e}getProviderID(){var e=this.config.getValue("providerID",null);if(null!==e)return e;var t=this.config.getValue("client_id",null,!0);return this.config.getValue("authorization",null,!0)+"|"+t}processTokenResponse(e){let t;if(!e.state)throw new Error("Could not get state from storage.");if(t=this.store.getState(e.state),!t)throw new Error("Could not retrieve state");if(!t.providerID)throw new Error("Could not get providerid from state");return n.log("processTokenResponse ",e,""),this.processReceivedToken(e,t)}processReceivedToken(e,t){let r=n.epoch();return e.received=r,e.expires_in?(e.expires=r+parseInt(e.expires_in,10),e.expires_in=parseInt(e.expires_in,10)):!1===this.config.getValue("default_lifetime",null)?e.expires=null:this.config.has("permanent_scope")?this.store.hasScope(e,this.config.getValue("permanent_scope"))||(e.expires=null):this.config.has("default_lifetime")?e.expires=r+this.config.getValue("default_lifetime"):e.expires=r+3600,e.scope?(e.scopes=e.scope.split(" "),delete e.scope):t.scopes?e.scopes=t.scopes:e.scopes=[],n.log("processTokenResponse completed ",e,""),this.store.saveToken(t.providerID,e),t.restoreHash?window.location.hash=t.restoreHash:window.location.hash="",e}processAuthorizationCodeResponse(e){let t;if(console.log(this),this.emit("authorizationCode",e),!e.state)throw new Error("Could not find state paramter from callback.");if(t=this.store.getState(e.state),null===t)throw new Error("Could not find retrieve state object.");if(console.log("state",t),!this.config.has("token"))return void n.log("Received an authorization code. Will not process it as the config option [token] endpoint is not set. If you would like to process the code yourself, please subscribe to the [authorizationCode] event");if(!this.config.has("client_secret"))throw new Error("Configuration missing [client_secret]");let r=new Headers;r.append("Authorization","Basic "+btoa(this.config.getValue("client_id")+":"+this.config.getValue("client_secret"))),r.append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");let o={grant_type:"authorization_code",code:e.code};t.hasOwnProperty("redirect_uri")&&(o.redirect_uri=t.redirect_uri);let i={mode:"cors",headers:r,method:"POST",body:n.encodeQS(o)};return fetch(this.config.getValue("token"),i).then((e=>e.json())).then((e=>(n.log("Received response on token endpoint ",e,""),this.processReceivedToken(e,t))))}processErrorResponse(e){var t;if(!e.state)throw new Error("Could not get [state] and no default providerid is provided.");if(!(t=this.store.getState(e.state)))throw new Error("Could not retrieve state");if(!t.providerID)throw new Error("Could not get providerid from state");return t.restoreHash?window.location.hash=t.restoreHash:window.location.hash="",new c(e)}callback(e){let t=null;if("object"==typeof e)t=e;else if("string"==typeof e)t=n.getResponseFromURL(e);else{if(void 0!==e)return;t=n.getResponseFromURL(window.location.href)}if(n.log("Receving response in callback",t),t.hasOwnProperty("access_token"))return this.processTokenResponse(t);if(t.hasOwnProperty("code"))return this.processAuthorizationCodeResponse(t);if(t.hasOwnProperty("error"))throw this.processErrorResponse(t)}dump(){var e=this.store.getTokens(this.providerID);return{providerID:this.providerID,tokens:e,config:this.config}}_getRequestScopes(e){var t,r=[];if(this.config.has("scopes.request")){let e=this.config.getValue("scopes.request");for(t=0;t<e.length;t++)r.push(e[t])}if(e&&e.scopes&&e.scopes.request)for(t=0;t<e.scopes.request.length;t++)r.push(e.scopes.request[t]);return n.uniqueList(r)}_getRequiredScopes(e){var t,r=[];if(this.config.has("scopes.require")){let e=this.config.getValue("scopes.require");for(t=0;t<e.length;t++)r.push(e[t])}if(e&&e.scopes&&e.scopes.require)for(t=0;t<e.scopes.require.length;t++)r.push(e.scopes.require[t]);return n.uniqueList(r)}getToken(e){return e=e||{},new Promise(((t,r)=>{let o=this._getRequiredScopes(e),n=this.store.getToken(this.providerID,o);if(n)return t(n);if(e.hasOwnProperty("allowredir")&&!e.allowredir)throw new Error("Cannot obtain a token, when not allowed to redirect...");t(this._authorize(e))}))}checkToken(e){var t=this._getRequiredScopes(e);return this.store.getToken(this.providerID,t)}_authorize(e){var r,o,i;return Promise.resolve().then((()=>{let s=this.config.getValue("authorization",null,!0),a=this.config.getValue("client_id",null,!0),c=!1;if(e.hasOwnProperty("allowia")||this.config.has("allowia"))throw new Error('The allowia option was removed in JSO 4.1.0. Instead use {request: {prompt: "none"}}');if(n.log("About to send an authorization request to this endpoint",s),n.log("Options",e),r={},this.config.has("request")){let e=this.config.getValue("request");r=t()(r,e)}if(e.hasOwnProperty("request")&&(r=t()(r,e.request)),r.response_type=e.response_type||this.config.getValue("response_type","id_token token"),r.state=n.uuid(),this.config.has("redirect_uri")&&(r.redirect_uri=this.config.getValue("redirect_uri","")),e.redirect_uri&&(r.redirect_uri=e.redirect_uri),r.client_id=a,c=(i=this._getRequestScopes(e)).includes("openid"),i.length>0&&(r.scope=n.scopeList(i)),n.log("Running in mode: "+(c?"OpenID Connect mode":"OAuth mode")),c&&!r.hasOwnProperty("redirect_uri"))throw new Error("An OpenID Request requires a redirect_uri to be set. Please add to configuration. A redirect_uri is not required for plain OAuth");c&&(r.nonce=n.uuid()),n.log("Debug Authentication request object",JSON.stringify(r,void 0,2)),o=n.encodeURL(s,r),window.location.hash&&(r.restoreHash=window.location.hash),r.providerID=this.providerID,i&&(r.scopes=i),n.log("Saving state ["+r.state+"]"),n.log(JSON.parse(JSON.stringify(r)));var u=this.Loader;return e.hasOwnProperty("loader")&&(u=e.loader),n.log("Looking for loader",e,u),this.store.saveState(r.state,r),this.gotoAuthorizeURL(o,u).then((e=>{if(!0!==e)return this.callback(e)}))}))}gotoAuthorizeURL(e,t){return new Promise((function(r,o){if(null!==t&&"function"==typeof t){var n=new t(e);if(!(n instanceof s))throw new Error("JSO selected Loader is not an instance of BasicLoader.");r(n.execute())}else o(new Error("Cannot redirect to authorization endpoint because of missing redirect handler"))}))}wipeTokens(){this.store.wipeTokens(this.providerID)}}const h={localStorageKeys:{redirectAfterToken:"_redirect_after_token",accessToken:"_all_login_access_token",refreshToken:"_all_login_refresh_token",expiresAt:"_all_login_expires_at",data:"_all_login_user_data"},config:{},client:!1,init:function(){var e=this;if(this.loadConfig(),"disabled"!==this.config.login_enabled)if(window.allLoginTokenData&&window.allLoginTokenData.access_token){this.updateTokens(window.allLoginTokenData);const e=localStorage.getItem(this.localStorageKeys.redirectAfterToken);localStorage.removeItem(this.localStorageKeys.redirectAfterToken),document.location.href=e}else this.initClient(),this.hasValidToken()||this.hasExpiredToken()?this.getContacts().then((function(t){e.dispatchEvent("all_login_ready_loggedIn",document,t)})):(window.console&&console.log("[ALL Login] User is logged out"),setTimeout((function(){e.dispatchEvent("all_login_ready_loggedOut")}),1e3))},loadConfig:function(){void 0!==window.deAllLoginConfig&&(this.config=window.deAllLoginConfig)},initClient:function(){this.client=new f({providerID:"accor",client_id:this.config.client_id,redirect_uri:this.config.website_base_url+"/oauth2--callback",authorization:this.config.auth_base_url+"/as/authorization.oauth2",response_type:"code",scopes:{request:["openid"]}})},hasValidToken:function(){const e=localStorage.getItem(this.localStorageKeys.accessToken),t=parseInt(localStorage.getItem(this.localStorageKeys.expiresAt),10);return e&&!isNaN(t)&&Date.now()<t&&t-Date.now()>3e3},hasExpiredToken:function(){const e=localStorage.getItem(this.localStorageKeys.accessToken),t=parseInt(localStorage.getItem(this.localStorageKeys.expiresAt),10);return e&&!isNaN(t)&&Date.now()+3e3>=t},getToken:async function(){const e=this;if(e.hasExpiredToken()){window.console&&console.log("[ALL Login] Expired token");const t=await fetch("/_all_login_refresh_token",{method:"POST",body:new URLSearchParams({refreshToken:localStorage.getItem(e.localStorageKeys.refreshToken)})}).then((e=>e.json()));return e.updateTokens(t),localStorage.getItem(e.localStorageKeys.accessToken)}return e.hasValidToken()?localStorage.getItem(e.localStorageKeys.accessToken):e.doLogin()},doLogin:function(){const e=this;localStorage.setItem(this.localStorageKeys.redirectAfterToken,document.location.href),this.client.getToken().then((t=>{e.dispatchEvent("all_login_doLoginToken",document,t)}))},clear:function(){localStorage.removeItem(this.localStorageKeys.accessToken),localStorage.removeItem(this.localStorageKeys.refreshToken),localStorage.removeItem(this.localStorageKeys.expiresAt),localStorage.removeItem(this.localStorageKeys.data)},logout:function(){this.clear(),this.dispatchEvent("all_login_logout",document,!0),setTimeout((function(){location.reload()}),500)},getContacts:async function(){const e=this,t=new Headers;return t.append("apikey",this.config.accor_api_key),t.append("authorization",`Bearer ${await this.getToken()}`),fetch(this.config.accor_api_base_url+"/customer/v1/contacts/me",{method:"GET",headers:t,mode:"cors"}).then((e=>e.json())).then((t=>{e.dispatchEvent("all_login_full_contact_api_response",document,t);const r=this.getRelevantData(t);return localStorage.setItem(this.localStorageKeys.data,JSON.stringify(r)),Promise.resolve(r)})).catch(console.error)},getUserData:function(){return JSON.parse(localStorage.getItem(this.localStorageKeys.data))},getRelevantData:function(e){let t="",r="",o=0,n="";try{const r=e.loyalty.loyaltyCards.card.filter((e=>e.isLastActiveCard));if(r.length>0){const e=r.shift();t=e.cardNumber,n=e.cardProduct.productTier}}catch(e){window.console&&console.log("[ALL Login] Error getting card number",e)}try{o=e.loyalty.balances.nbPoints}catch(e){window.console&&console.log("[ALL Login] Error getting number of points",e)}try{r=e.individual.individualName.firstName}catch(e){window.console&&console.log("[ALL Login] Error getting firstName",e)}return{firstName:r,cardNumber:t,points:o,status:n}},updateTokens:function(e){localStorage.setItem(this.localStorageKeys.accessToken,e.access_token),localStorage.setItem(this.localStorageKeys.refreshToken,e.refresh_token),localStorage.setItem(this.localStorageKeys.expiresAt,Date.now()+1e3*e.expires_in),this.dispatchEvent("all_login_updateTokens",document,e)},dispatchEvent:function(e,t,r){let o;t=t||document,"function"==typeof Event?o=new Event(e):(o=document.createEvent("Event"),o.initEvent(e,!0,!0)),void 0!==r&&(o.detail=r),t.dispatchEvent(o)},onDomReady:function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}};window.DEAllLogin=h,h.onDomReady((function(){h.init()}))})()})();