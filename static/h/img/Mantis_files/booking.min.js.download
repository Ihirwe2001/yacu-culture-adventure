!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.sbjs=e()}}(function(){return function e(t,r,n){function s(a,o){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[a]={exports:{}};t[a][0].call(p.exports,function(e){var r=t[a][1][e];return s(r?r:e)},p,p.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){"use strict";var n=e("./init"),s={init:function(e){this.get=n(e),e&&e.callback&&"function"==typeof e.callback&&e.callback(this.get)}};t.exports=s},{"./init":6}],2:[function(e,t,r){"use strict";var n=e("./terms"),s=e("./helpers/utils"),i={containers:{current:"sbjs_current",current_extra:"sbjs_current_add",first:"sbjs_first",first_extra:"sbjs_first_add",session:"sbjs_session",udata:"sbjs_udata",promocode:"sbjs_promo"},service:{migrations:"sbjs_migrations"},delimiter:"|||",aliases:{main:{type:"typ",source:"src",medium:"mdm",campaign:"cmp",content:"cnt",term:"trm"},extra:{fire_date:"fd",entrance_point:"ep",referer:"rf"},session:{pages_seen:"pgs",current_page:"cpg"},udata:{visits:"vst",ip:"uip",agent:"uag"},promo:"code"},pack:{main:function(e){return i.aliases.main.type+"="+e.type+i.delimiter+i.aliases.main.source+"="+e.source+i.delimiter+i.aliases.main.medium+"="+e.medium+i.delimiter+i.aliases.main.campaign+"="+e.campaign+i.delimiter+i.aliases.main.content+"="+e.content+i.delimiter+i.aliases.main.term+"="+e.term},extra:function(e){return i.aliases.extra.fire_date+"="+s.setDate(new Date,e)+i.delimiter+i.aliases.extra.entrance_point+"="+document.location.href+i.delimiter+i.aliases.extra.referer+"="+(document.referrer||n.none)},user:function(e,t){return i.aliases.udata.visits+"="+e+i.delimiter+i.aliases.udata.ip+"="+t+i.delimiter+i.aliases.udata.agent+"="+navigator.userAgent},session:function(e){return i.aliases.session.pages_seen+"="+e+i.delimiter+i.aliases.session.current_page+"="+document.location.href},promo:function(e){return i.aliases.promo+"="+s.setLeadingZeroToInt(s.randomInt(e.min,e.max),e.max.toString().length)}}};t.exports=i},{"./helpers/utils":5,"./terms":9}],3:[function(e,t,r){"use strict";var n=e("../data").delimiter;t.exports={encodeData:function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},decodeData:function(e){try{return decodeURIComponent(e).replace(/\%21/g,"!").replace(/\%7E/g,"~").replace(/\%2A/g,"*").replace(/\%27/g,"'").replace(/\%28/g,"(").replace(/\%29/g,")")}catch(t){try{return unescape(e)}catch(r){return""}}},set:function(e,t,r,n,s){var i,a;if(r){var o=new Date;o.setTime(o.getTime()+60*r*1e3),i="; expires="+o.toGMTString()}else i="";a=n&&!s?";domain=."+n:"",document.cookie=this.encodeData(e)+"="+this.encodeData(t)+i+a+"; path=/"},get:function(e){for(var t=this.encodeData(e)+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var s=r[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return this.decodeData(s.substring(t.length,s.length))}return null},destroy:function(e,t,r){this.set(e,"",-1,t,r)},parse:function(e){var t=[],r={};if("string"==typeof e)t.push(e);else for(var s in e)e.hasOwnProperty(s)&&t.push(e[s]);for(var i=0;i<t.length;i++){var a;r[this.unsbjs(t[i])]={},a=this.get(t[i])?this.get(t[i]).split(n):[];for(var o=0;o<a.length;o++){var c=a[o].split("="),u=c.splice(0,1);u.push(c.join("=")),r[this.unsbjs(t[i])][u[0]]=this.decodeData(u[1])}}return r},unsbjs:function(e){return e.replace("sbjs_","")}}},{"../data":2}],4:[function(e,t,r){"use strict";t.exports={parse:function(e){for(var t=this.parseOptions,r=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},s=14;s--;)n[t.key[s]]=r[s]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,r,s){r&&(n[t.q.name][r]=s)}),n},parseOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},getParam:function(e){for(var t={},r=e?e:window.location.search.substring(1),n=r.split("&"),s=0;s<n.length;s++){var i=n[s].split("=");if("undefined"==typeof t[i[0]])t[i[0]]=i[1];else if("string"==typeof t[i[0]]){var a=[t[i[0]],i[1]];t[i[0]]=a}else t[i[0]].push(i[1])}return t},getHost:function(e){return this.parse(e).host.replace("www.","")}}},{}],5:[function(e,t,r){"use strict";t.exports={escapeRegexp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},setDate:function(e,t){var r=e.getTimezoneOffset()/60,n=e.getHours(),s=t||0===t?t:-r;e.setHours(n+r+s);var i=e.getFullYear(),a=this.setLeadingZeroToInt(e.getMonth()+1,2),o=this.setLeadingZeroToInt(e.getDate(),2),c=this.setLeadingZeroToInt(e.getHours(),2),u=this.setLeadingZeroToInt(e.getMinutes(),2),p=this.setLeadingZeroToInt(e.getSeconds(),2);return i+"-"+a+"-"+o+" "+c+":"+u+":"+p},setLeadingZeroToInt:function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},{}],6:[function(e,t,r){"use strict";var n=e("./data"),s=e("./terms"),i=e("./helpers/cookies"),a=e("./helpers/uri"),o=e("./helpers/utils"),c=e("./params"),u=e("./migrations");t.exports=function(e){function t(){var e;if("undefined"!=typeof y.utm_source||"undefined"!=typeof y.utm_medium||"undefined"!=typeof y.utm_campaign||"undefined"!=typeof y.utm_content||"undefined"!=typeof y.utm_term||"undefined"!=typeof y.gclid||"undefined"!=typeof y.yclid||"undefined"!=typeof y[h.campaign_param])g(),e=r(s.traffic.utm);else if(f(s.traffic.organic))g(),e=r(s.traffic.organic);else if(!i.get(n.containers.session)&&f(s.traffic.referral))g(),e=r(s.traffic.referral);else{if(i.get(n.containers.first)||i.get(n.containers.current))return i.get(n.containers.current);g(),e=r(s.traffic.typein)}return e}function r(e){switch(e){case s.traffic.utm:b=s.traffic.utm,k="undefined"!=typeof y.utm_source?y.utm_source:"undefined"!=typeof y.gclid?"google":"undefined"!=typeof y.yclid?"yandex":s.none,w="undefined"!=typeof y.utm_medium?y.utm_medium:"undefined"!=typeof y.gclid?"cpc":"undefined"!=typeof y.yclid?"cpc":s.none,q="undefined"!=typeof y.utm_campaign?y.utm_campaign:"undefined"!=typeof y[h.campaign_param]?y[h.campaign_param]:"undefined"!=typeof y.gclid?"google_cpc":"undefined"!=typeof y.yclid?"yandex_cpc":s.none,I=y.utm_content||s.none,j=p()||s.none;break;case s.traffic.organic:b=s.traffic.organic,k=k||a.getHost(document.referrer),w=s.referer.organic,q=s.none,I=s.none,j=s.none;break;case s.traffic.referral:b=s.traffic.referral,k=k||a.getHost(document.referrer),w=w||s.referer.referral,q=s.none,I=a.parse(document.referrer).path,j=s.none;break;case s.traffic.typein:b=s.traffic.typein,k=h.typein_attributes.source,w=h.typein_attributes.medium,q=s.none,I=s.none,j=s.none;break;default:b=s.oops,k=s.oops,w=s.oops,q=s.oops,I=s.oops,j=s.oops}var t={type:b,source:k,medium:w,campaign:q,content:I,term:j};return n.pack.main(t)}function p(){var e=document.referrer;if(y.utm_term)return y.utm_term;if(!(e&&a.parse(e).host&&a.parse(e).host.match(/^(?:.*\.)?yandex\..{2,9}$/i)))return!1;try{return a.getParam(a.parse(document.referrer).query).text}catch(t){return!1}}function f(e){var t=document.referrer;switch(e){case s.traffic.organic:return!!t&&l(t)&&m(t);case s.traffic.referral:return!!t&&l(t)&&d(t);default:return!1}}function l(e){if(h.domain){if(_)return a.getHost(e)!==a.getHost(v);var t=new RegExp("^(?:.*\\.)?"+o.escapeRegexp(v)+"$","i");return!a.getHost(e).match(t)}return a.getHost(e)!==a.getHost(document.location.href)}function m(e){var t="yandex",r="text",n="google",s=new RegExp("^(?:.*\\.)?"+o.escapeRegexp(t)+"\\..{2,9}$"),i=new RegExp(".*"+o.escapeRegexp(r)+"=.*"),c=new RegExp("^(?:www\\.)?"+o.escapeRegexp(n)+"\\..{2,9}$");if(a.parse(e).query&&a.parse(e).host.match(s)&&a.parse(e).query.match(i))return k=t,!0;if(a.parse(e).host.match(c))return k=n,!0;if(!a.parse(e).query)return!1;for(var u=0;u<h.organics.length;u++){if(a.parse(e).host.match(new RegExp("^(?:.*\\.)?"+o.escapeRegexp(h.organics[u].host)+"$","i"))&&a.parse(e).query.match(new RegExp(".*"+o.escapeRegexp(h.organics[u].param)+"=.*","i")))return k=h.organics[u].display||h.organics[u].host,!0;if(u+1===h.organics.length)return!1}}function d(e){if(!(h.referrals.length>0))return k=a.getHost(e),!0;for(var t=0;t<h.referrals.length;t++){if(a.parse(e).host.match(new RegExp("^(?:.*\\.)?"+o.escapeRegexp(h.referrals[t].host)+"$","i")))return k=h.referrals[t].display||h.referrals[t].host,w=h.referrals[t].medium||s.referer.referral,!0;if(t+1===h.referrals.length)return k=a.getHost(e),!0}}function g(){i.set(n.containers.current_extra,n.pack.extra(h.timezone_offset),x,v,_),i.get(n.containers.first_extra)||i.set(n.containers.first_extra,n.pack.extra(h.timezone_offset),x,v,_)}var h=c.fetch(e),y=a.getParam(),v=h.domain.host,_=h.domain.isolate,x=h.lifetime;u.go(x,v,_);var b,k,w,q,I,j;return function(){i.set(n.containers.current,t(),x,v,_),i.get(n.containers.first)||i.set(n.containers.first,i.get(n.containers.current),x,v,_);var e,r;i.get(n.containers.udata)?(e=parseInt(i.parse(n.containers.udata)[i.unsbjs(n.containers.udata)][n.aliases.udata.visits])||1,e=i.get(n.containers.session)?e:e+1,r=n.pack.user(e,h.user_ip)):(e=1,r=n.pack.user(e,h.user_ip)),i.set(n.containers.udata,r,x,v,_);var s;i.get(n.containers.session)?(s=parseInt(i.parse(n.containers.session)[i.unsbjs(n.containers.session)][n.aliases.session.pages_seen])||1,s+=1):s=1,i.set(n.containers.session,n.pack.session(s),h.session_length,v,_),h.promocode&&!i.get(n.containers.promocode)&&i.set(n.containers.promocode,n.pack.promo(h.promocode),x,v,_)}(),i.parse(n.containers)}},{"./data":2,"./helpers/cookies":3,"./helpers/uri":4,"./helpers/utils":5,"./migrations":7,"./params":8,"./terms":9}],7:[function(e,t,r){"use strict";var n=e("./data"),s=e("./helpers/cookies");t.exports={go:function(e,t,r){var i,a=this.migrations,o={l:e,d:t,i:r};if(s.get(n.containers.first)||s.get(n.service.migrations)){if(!s.get(n.service.migrations))for(i=0;i<a.length;i++)a[i].go(a[i].id,o)}else{var c=[];for(i=0;i<a.length;i++)c.push(a[i].id);var u="";for(i=0;i<c.length;i++)u+=c[i]+"=1",i<c.length-1&&(u+=n.delimiter);s.set(n.service.migrations,u,o.l,o.d,o.i)}},migrations:[{id:"1418474375998",version:"1.0.0-beta",go:function(e,t){var r=e+"=1",i=e+"=0",a=function(e,t,r){return t||r?e:n.delimiter};try{var o=[];for(var c in n.containers)n.containers.hasOwnProperty(c)&&o.push(n.containers[c]);for(var u=0;u<o.length;u++)if(s.get(o[u])){var p=s.get(o[u]).replace(/(\|)?\|(\|)?/g,a);s.destroy(o[u],t.d,t.i),s.destroy(o[u],t.d,!t.i),s.set(o[u],p,t.l,t.d,t.i)}s.get(n.containers.session)&&s.set(n.containers.session,n.pack.session(0),t.l,t.d,t.i),s.set(n.service.migrations,r,t.l,t.d,t.i)}catch(f){s.set(n.service.migrations,i,t.l,t.d,t.i)}}}]}},{"./data":2,"./helpers/cookies":3}],8:[function(e,t,r){"use strict";var n=e("./terms"),s=e("./helpers/uri");t.exports={fetch:function(e){var t=e||{},r={};if(r.lifetime=this.validate.checkFloat(t.lifetime)||6,r.lifetime=parseInt(30*r.lifetime*24*60),r.session_length=this.validate.checkInt(t.session_length)||30,r.timezone_offset=this.validate.checkInt(t.timezone_offset),r.campaign_param=t.campaign_param||!1,r.user_ip=t.user_ip||n.none,t.promocode?(r.promocode={},r.promocode.min=parseInt(t.promocode.min)||1e5,r.promocode.max=parseInt(t.promocode.max)||999999):r.promocode=!1,t.typein_attributes&&t.typein_attributes.source&&t.typein_attributes.medium?(r.typein_attributes={},r.typein_attributes.source=t.typein_attributes.source,r.typein_attributes.medium=t.typein_attributes.medium):r.typein_attributes={source:"(direct)",medium:"(none)"},t.domain&&this.validate.isString(t.domain)?r.domain={host:t.domain,isolate:!1}:t.domain&&t.domain.host?r.domain=t.domain:r.domain={host:s.getHost(document.location.hostname),isolate:!1},r.referrals=[],t.referrals&&t.referrals.length>0)for(var i=0;i<t.referrals.length;i++)t.referrals[i].host&&r.referrals.push(t.referrals[i]);if(r.organics=[],t.organics&&t.organics.length>0)for(var a=0;a<t.organics.length;a++)t.organics[a].host&&t.organics[a].param&&r.organics.push(t.organics[a]);return r.organics.push({host:"bing.com",param:"q",display:"bing"}),r.organics.push({host:"yahoo.com",param:"p",display:"yahoo"}),r.organics.push({host:"about.com",param:"q",display:"about"}),r.organics.push({host:"aol.com",param:"q",display:"aol"}),r.organics.push({host:"ask.com",param:"q",display:"ask"}),r.organics.push({host:"globososo.com",param:"q",display:"globo"}),r.organics.push({host:"go.mail.ru",param:"q",display:"go.mail.ru"}),r.organics.push({host:"rambler.ru",param:"query",display:"rambler"}),r.organics.push({host:"tut.by",param:"query",display:"tut.by"}),r.referrals.push({host:"t.co",display:"twitter.com"}),r.referrals.push({host:"plus.url.google.com",display:"plus.google.com"}),r},validate:{checkFloat:function(e){return e&&this.isNumeric(parseFloat(e))?parseFloat(e):!1},checkInt:function(e){return e&&this.isNumeric(parseInt(e))?parseInt(e):!1},isNumeric:function(e){return!isNaN(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)}}}},{"./helpers/uri":4,"./terms":9}],9:[function(e,t,r){"use strict";t.exports={traffic:{utm:"utm",organic:"organic",referral:"referral",typein:"typein"},referer:{referral:"referral",organic:"organic",social:"social"},none:"(none)",oops:"(Houston, we have a problem)"}},{}]},{},[1])(1)});!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,i,r){var c;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},t.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}try{c=JSON.stringify(i),/^[\{\[]/.test(c)&&(i=c)}catch(a){}return i=o.write?o.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",i,r.expires&&"; expires="+r.expires.toUTCString(),r.path&&"; path="+r.path,r.domain&&"; domain="+r.domain,r.secure?"; secure":""].join("")}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<p.length;f++){var u=p[f].split("="),l=u[0].replace(d,decodeURIComponent),m=u.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=o.read?o.read(m,l):o(m,l)||m.replace(d,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(a){}if(n===l){c=m;break}n||(c[l]=m)}catch(a){}}return c}}return t.set=t,t.get=function(e){return t(e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})});(function($){$.fn.detectSourceID=function(cback){if(accorBookingArgs.useAccorTrackingDecorator){cback(false,{});return}var consolelog=function(){consolelog.history=consolelog.history||[];consolelog.history.push(arguments);if(window.console){if(console.log.apply){console.log.apply(console,arguments)}else{console.log(Array.prototype.slice.call(arguments))}}},getUrlVars=function(){var vars={},parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value});return vars},linkSourceID=function(){var urlparms=getUrlVars(),cookievalue=Cookies.get("accor_booking_SourceID"),sourceID,validation=/^([a-zA-Z0-9]+-)+[a-zA-Z0-9]+$/g;if(typeof urlparms["sourceid"]!=="undefined"&&urlparms["sourceid"].match(validation)){sourceID=urlparms["sourceid"];Cookies.set("accor_booking_SourceID",sourceID,{expires:30});return sourceID}if(typeof cookievalue!=="undefined"&&cookievalue.match(validation)){return cookievalue}return false};sbjs.init({referrals:[{host:"facebook.com",medium:"social",display:"facebook"},{host:"l.facebook.com",medium:"social",display:"facebook"},{host:"lm.facebook.com",medium:"social",display:"facebook"},{host:"t.co",medium:"social",display:"twitter"},{host:"plus.url.google.com",medium:"social",display:"googleplus"},{host:"vk.com",medium:"social",display:"vkontakte"}],lifetime:3,callback:function(){var sourceID="Direct_Access",currentSourceID=linkSourceID();if(currentSourceID){sourceID=currentSourceID}else{if(sbjs.get.current.typ=="organic"){sourceID="SEO_"+sbjs.get.current.src.toUpperCase()}if(sbjs.get.current.typ=="referral"&&sbjs.get.current.mdm=="social"){sourceID=sbjs.get.current.src}}var params=getUrlVars();var tracking={utm_source:"hotelwebsite["+(accorBookingArgs.destination||"")+"]",utm_medium:"accor regional websites",utm_campaign:"hotel website search"};consolelog("Detected SourceID ",sourceID);consolelog("Detected Tracking Params ",tracking);cback(sourceID,tracking)}})}})(jQuery);(function($){$.fn.accorFixLinksWithTrackingParams=function(params){function parseUrlParts(href){var l=document.createElement("a");l.href=href;return l}function searchContains(param,search){var toFind=new RegExp(param+"=");return toFind.test(search)}$(this).find("a").each(function(){var linkTag=$(this);var href=linkTag.attr("href");if(href&&(/all\.accor\.com/.test(href)||/accorhotels\.com/.test(href))){var newUrl="";var u=parseUrlParts(href);if(!u.hostname||u.hostname===""){return}var newSearch=u.search===""?"?":u.search+"&";var paramsToAdd=[];for(var key in params){if(params.hasOwnProperty(key)&&params[key]!==false&&!searchContains(key,u.search)){paramsToAdd.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]))}}if(paramsToAdd.length>0){newSearch=newSearch+paramsToAdd.join("&");newUrl=u.protocol+"//"+u.hostname+u.pathname+newSearch+u.hash;linkTag.attr("href",newUrl)}}})}})(jQuery);(function($){var isALLEnabled=typeof _accor_ALL_status!=="undefined"&&_accor_ALL_status;var today=new Date,defaults,log=function(){log.history=log.history||[];log.history.push(arguments);if(window.console){if(console.log.apply){console.log.apply(console,arguments)}else{console.log(Array.prototype.slice.call(arguments))}}},dateDiffInDays=function(a,b){var utc1=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());var utc2=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((utc2-utc1)/(1e3*60*60*24))},overrideDefaults=function(objDefaults,obj){var result={};for(var i in objDefaults){result[i]=objDefaults[i];if(typeof obj[i]!=="undefined"){result[i]=obj[i]}}return result},buildQueryString=function(params){var qs="",chunks=[];for(var key in params){if(params[key]!==false){chunks.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]))}}qs=chunks.join("&");return qs},brands={pullman:{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","pt","zh"]},sofitel:{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh"]},mgallery:{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh"]},novotel:{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","pt","fr","zh","de","es","it","nl","pl","ru"]},mercure:{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","pt","fr","zh","de","es","it","nl","pl","ru"]},"so-sofitel":{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh"]},"sofitel-legend":{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh"]},"ibis-red":{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh","ja","it","pl","id"]},"ibis-styles":{baseUrl:"https://all.accor.com/lien_externe.svlt",baseUrlMobile:"https://all.accor.com/lien_externe.svlt",supported_languages:["gb","en","de","es","fr","nl","pt","ru","zh","ja","it","pl","id"]}},default_base_url="https://all.accor.com/lien_externe.svlt",default_base_url_mobile="https://all.accor.com/lien_externe.svlt",maybePatchAccorURL=function(url){if(/accor\.com/.test(url)&&/destination=[0-9A-Za-z]{4,6}([^0-9A-Za-z].+)?$/.test(url)&&!/hideHotelDetails=/.test(url)){if(/goto=search_all_stays/.test(url)){url=url.replace("goto=search_all_stays","goto=wl_intpartner_search");window.console&&console.log("Replaced search_all_stays with wl_intpartner_search in the accor URL",url)}var shouldPatchREs=[/goto=rech_resa/,/goto=wl_intpartner_search/,/goto=spec_rate/];var shouldPatch=false;for(var i=0;i<shouldPatchREs.length;i++){if(shouldPatchREs[i].test(url)){shouldPatch=true;break}}if(shouldPatch){url=url.replace("?","?hideHotelDetails=YES&");window.console&&console.log("Added hideHotelDetails=YES to the accor URL",url)}}return url},fixParameterNameFromDataAttribute=function(obj){obj=obj||{};var result={},mapping={};for(var group_key in defaults){var group=defaults[group_key];for(var key in group){mapping[key.toLowerCase()]=key}}for(var key in obj){if(typeof mapping[key]!=="undefined"){result[mapping[key]]=obj[key]}}return result},normalizeMultiRoomArgsForMobile=function(args){return args;if(!isMobile()){return args}var mappedArgs={},argsMapping={"room[0].adultNumber":"adultNumber","room[0].childrenNumber":"childrenNumber","room[0].childrenAge[0]":"childrenAge0","room[0].childrenAge[1]":"childrenAge1","room[0].childrenAge[2]":"childrenAge2",roomNumber:false,"room[1].adultNumber":false,"room[1].childrenNumber":false,"room[1].childrenAge[0]":false,"room[1].childrenAge[1]":false,"room[1].childrenAge[2]":false,"room[2].adultNumber":false,"room[2].childrenNumber":false,"room[2].childrenAge[0]":false,"room[2].childrenAge[1]":false,"room[2].childrenAge[2]":false};for(var key in args){if(!args.hasOwnProperty(key))continue;if(key=="goto"&&args[key]=="search_all_stays"){args[key]="rech_resa"}if(typeof argsMapping[key]!=="undefined"){if(argsMapping[key]!==false){var newKey=argsMapping[key];if(typeof mappedArgs[newKey]==="undefined"||mappedArgs[newKey]===false&&args[key]!==false){mappedArgs[newKey]=args[key]}}}else{if(typeof mappedArgs[key]==="undefined"||mappedArgs[key]===false&&args[key]!==false){mappedArgs[key]=args[key]}}}return mappedArgs},isMobileOrTablet=function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check},isMobile=function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check},windowOpen=function(path,params,tryLegacyDecorator,target){target=target||"_blank";tryLegacyDecorator=tryLegacyDecorator||false;var parts=[];for(var key in params)if(params.hasOwnProperty(key)){if(key=="code_langue"&&params[key]=="en"){params[key]="gb"}parts.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]))}var qs=parts.join("&");var glue=path.indexOf("?")===-1?"?":"&";var url=qs===""?path:path+glue+qs;if(tryLegacyDecorator&&typeof _gat!=="undefined"&&typeof _gat._getTrackers!=="undefined"){url=_gat._getTrackers()[0]._getLinkerUrl(url)}if(typeof window.__AccorFilterBookingURL==="function"){url=__AccorFilterBookingURL(url,params)}url=maybePatchAccorURL(url);log("Link (windowOpen)",url);window.open(url,target)},gotoBE=function(path,params,target){return windowOpen(path,params,false,target)},doMultiTkCodeRequest=function(params){var base_url=params.config.baseUrl;var tks=params.get.preferredCode.split("|");var ra1=tks.slice(0,2);var ra2=tks.length>2?tks.slice(2,4):false;var today=new Date;var getParams={goto:"spec_rate",btp:"1",all_cont:"1",ragp:"1",libelle_tarif:"1",multi_tarif:"1",showEco:"1",extendTk:tks.length>2?"1":"0",tksToHighlight:tks.join("|"),RA1:ra1.join("|"),sub:"ISP",nom_ville:params.get.destination,sourceid:params.get.sourceid,merchantid:params.get.merchantid,gacid:typeof params.get.gacid!=="undefined"?params.get.gacid:false,_ga:typeof params.get._ga!=="undefined"?params.get._ga:false,code_langue:params.get.code_langue,jour_arrivee:typeof params.get.dayIn!=="undefined"?params.get.dayIn:today.getDate(),mois_arrivee:typeof params.get.monthIn!=="undefined"?params.get.monthIn:today.getMonth()+1,annee_arrivee:typeof params.get.yearIn!=="undefined"?params.get.yearIn:today.getFullYear(),nb_nuit:typeof params.get.nightNb!=="undefined"?params.get.nightNb:"1",adultNumber:typeof params.get.adultNumber!=="undefined"?params.get.adultNumber:"2",num_carte_fidelite:typeof params.get.fidelityCardNumber!=="undefined"&&params.get.fidelityCardNumber!=""?params.get.fidelityCardNumber:false,"filter.brands":typeof params.get["filter.brands"]!=="undefined"?params.get["filter.brands"]:false,brandCode:typeof params.get.brandCode!=="undefined"?params.get.brandCode:false,reserverType:typeof params.get.reserverType!=="undefined"?params.get.reserverType:false,companyId:typeof params.get.companyId!=="undefined"?params.get.companyId:false,companyContract:typeof params.get.companyContract!=="undefined"?params.get.companyContract:false,agencyAccountId:typeof params.get.agencyAccountId!=="undefined"?params.get.agencyAccountId:false,agencyAccountContract:typeof params.get.agencyAccountContract!=="undefined"?params.get.agencyAccountContract:false};if(ra2){getParams.RA2=ra2.join("|")}var glue=base_url.indexOf("?")===-1?"?":"&";var full_url=base_url+glue+buildQueryString(getParams);if(typeof window.__AccorFilterBookingURL==="function"){full_url=__AccorFilterBookingURL(full_url,getParams)}full_url=maybePatchAccorURL(full_url);window.open(full_url,"_blank");log("Accor Booking MultiTk book room",full_url)},getComparableDate=function(d){function zPad(s){s=""+s;return s.length==1?"0"+s:s}return d.getFullYear()+"-"+zPad(d.getMonth()+1)+"-"+zPad(d.getDate())};if(isALLEnabled){log("All ENABLED");for(var key in brands){if(brands.hasOwnProperty(key)){brands[key].baseUrl="https://all.accor.com/lien_externe.svlt";brands[key].baseUrlMobile="https://all.accor.com/lien_externe.svlt"}}default_base_url=default_base_url_mobile="https://all.accor.com/lien_externe.svlt"}$(document).ready(function(){$.fn.detectSourceID(function(sourceID,trackingParams){defaults={config:{brand:false,formTarget:"_blank",baseUrl:false,baseUrlMobile:false,disableUtmParameters:false},get:{partner_id:false,dayIn:today.getDate(),monthIn:today.getMonth()+1,yearIn:today.getFullYear(),nightNb:1,roomNumber:1,adultNumber:1,childrenNumber:0,code_langue:"gb",childrenAge0:false,childrenAge1:false,childrenAge2:false,fidelityCardNumber:false,preferredCode:false,frhiOfferCode:false,frhiGoToStep1:false,"room[0].adultNumber":false,"room[0].childrenNumber":false,"room[0].childrenAge[0]":false,"room[0].childrenAge[1]":false,"room[0].childrenAge[2]":false,"room[1].adultNumber":false,"room[1].childrenNumber":false,"room[1].childrenAge[0]":false,"room[1].childrenAge[1]":false,"room[1].childrenAge[2]":false,"room[2].adultNumber":false,"room[2].childrenNumber":false,"room[2].childrenAge[0]":false,"room[2].childrenAge[1]":false,"room[2].childrenAge[2]":false,destination:false,currency:false,goto:"rech_resa",sourceid:sourceID,merchantid:false,xtor:false,gacid:false,_ga:false,"filter.brands":false,brandCode:false,reserverType:false,companyId:false,companyContract:false,agencyAccountId:false,agencyAccountContract:false,client_id:false}};var allTrackingParams={sourceid:sourceID,merchantid:false,gacid:false,_ga:false,partner_id:false};$.each(trackingParams,function(k,v){defaults.get[k]=v;allTrackingParams[k]=v});if(typeof window.accorBookingArgs!=="undefined"){defaults.config=overrideDefaults(defaults.config,window.accorBookingArgs);defaults.get=overrideDefaults(defaults.get,window.accorBookingArgs);allTrackingParams=overrideDefaults(allTrackingParams,window.accorBookingArgs)}$("body").on("accor.tracking_params_available",function(){if(typeof window.AccorBooking_GUA_ClientId!=="undefined"){allTrackingParams.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"){allTrackingParams._ga=window.AccorBooking_GUA_linkerParam}if(!accorBookingArgs.useAccorTrackingDecorator&&!(typeof window.accor_dont_fix_links_with_tracking_parameters!=="undefined"&&window.accor_dont_fix_links_with_tracking_parameters)){if(typeof allTrackingParams.merchantid!=="undefined"&&allTrackingParams.merchantid=="MS-"){delete allTrackingParams.merchantid}$("body").accorFixLinksWithTrackingParams(allTrackingParams)}})});var getElapsedMS=function(){if(typeof _accor_booking_measurement_start!=="undefined"){var now=new Date;return now.getTime()-_accor_booking_measurement_start.getTime()}return 0};var clientIdIntervalCounter=0;var lock=false;var searchForGaDecoratorParams=function(){clientIdIntervalCounter++;if(typeof window.ga!=="undefined"){if(typeof clientIdInterval!=="undefined"&&typeof window.AccorBooking_GUA_ClientId!=="undefined"&&window.AccorBooking_GUA_ClientId!=""&&typeof window.AccorBooking_GUA_linkerParam!=="undefined"&&window.AccorBooking_GUA_linkerParam!=""||clientIdIntervalCounter>4e3){if(clientIdIntervalCounter>4e3){log("Google Analytics decorator failed after 10 minutes")}clearInterval(clientIdInterval);return}if(!lock){lock=true;setTimeout(function(){ga(function(){lock=false;var trackerToUse=location.href.indexOf("useSecondTrackerToDecorate")!==-1?1:0;var trackers=ga.getAll();if(typeof trackers[trackerToUse]!=="undefined"){var clientId=trackers[trackerToUse].get("clientId");window.AccorBooking_GUA_ClientId=clientId;log("Detected clientID (gacid): "+clientId);var linkerParam=trackers[trackerToUse].get("linkerParam");if(linkerParam){var parts=linkerParam.split("=");if(parts.length>1){linkerParam=parts[1];window.AccorBooking_GUA_linkerParam=linkerParam;log("Detected linker param (_ga): "+linkerParam);log("Detected GA parameters after (ms): ",getElapsedMS());$("body").trigger("accor.tracking_params_available")}else{log("WARN likerParam format Error",linkerParam)}}else{log("WARN no linkerParam")}}else{log("WARN trackers["+trackerToUse+"] undefined")}})},10)}}else{}};if(!accorBookingArgs.useAccorTrackingDecorator){searchForGaDecoratorParams();var clientIdInterval=setInterval(searchForGaDecoratorParams,150);setTimeout(function(){if(typeof clientIdInterval!=="undefined"){log("giving up GA params detection");clearInterval(clientIdInterval);$("body").trigger("accor.tracking_params_available")}},6e5)}else{setTimeout(function(){$("body").trigger("accor.tracking_params_available")},1e4)}});window.accorMobileBookNow=function(){var baseUrl=default_base_url_mobile;var langCode="en";if(typeof window.accorBookingArgs.code_langue!=="undefined"){langCode=window.accorBookingArgs.code_langue}if(langCode.length>2&&langCode!="pt-br"){langCode=langCode.substr(0,2)}if(typeof defaults.config.brand!=="undefined"&&typeof brands[defaults.config.brand]!=="undefined"&&brands[defaults.config.brand].supported_languages.indexOf(langCode)!=-1){baseUrl=brands[defaults.config.brand].baseUrlMobile}var today=new Date;var date_in_the_past=new Date(today.getTime()-1728e5);var getParams={goto:"search_all_stays",destination:defaults.get.destination,sourceid:defaults.get.sourceid,merchantid:defaults.get.merchantid,code_langue:langCode,adultNumber:1,childrenNumber:1,nightNb:1,roomNumber:1,"room[0].adultNumber":1,"room[0].childrenNumber":0};if(typeof window.AccorBooking_GUA_ClientId!=="undefined"){getParams.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"){getParams._ga=window.AccorBooking_GUA_linkerParam}var glue=baseUrl.indexOf("?")===-1?"?":"&";var full_url=baseUrl+glue+buildQueryString(getParams);if(typeof window.__AccorFilterBookingURL==="function"){full_url=__AccorFilterBookingURL(full_url,getParams)}full_url=maybePatchAccorURL(full_url);window.open(full_url,"_blank");log("Accor Mobile booking url",full_url)};window.accorBookNow=function(params){params=params||{};var brand=typeof params.brand!=="undefined"?params.brand:accorBookingArgs.brand;params.brand=brand;if(brand==="raffles-revraise"){return rafflesRevRaiseBookNow(params)}if(brand=="swissotel"||brand==="fairmont"||brand=="raffles"){return frhiBookNow(params)}params=params||{};var finalParameters={config:{},get:{}},full_url="";finalParameters.config=overrideDefaults(defaults.config,params);finalParameters.get=overrideDefaults(defaults.get,params);if(typeof params.specialRate!=="undefined"&&params.specialRate!==""){finalParameters.get.preferredCode=params.specialRate}if(!finalParameters.config.baseUrl){finalParameters.config.baseUrl=default_base_url;if(finalParameters.config.brand&&typeof brands[finalParameters.config.brand]!=="undefined"&&brands[finalParameters.config.brand].supported_languages.indexOf(finalParameters.get.code_langue)!=-1){finalParameters.config.baseUrl=brands[finalParameters.config.brand].baseUrl}}if(!finalParameters.config.baseUrlMobile){finalParameters.config.baseUrlMobile=default_base_url_mobile;if(finalParameters.config.brand&&typeof brands[finalParameters.config.brand]!=="undefined"&&brands[finalParameters.config.brand].supported_languages.indexOf(finalParameters.get.code_langue)!=-1){finalParameters.config.baseUrlMobile=brands[finalParameters.config.brand].baseUrlMobile}}if(typeof finalParameters.get.code_langue!=="undefined"&&finalParameters.get.code_langue.length>2&&finalParameters.get.code_langue!=="pt-br"){finalParameters.get.code_langue=finalParameters.get.code_langue.substr(0,2)}if(typeof finalParameters.get.code_langue!=="undefined"&&finalParameters.get.code_langue.length>2&&finalParameters.get.code_langue!=="pt-br"){finalParameters.get.code_langue=finalParameters.get.code_langue.substr(0,2)}if(typeof finalParameters.get.companyContract!=="undefined"&&finalParameters.get.companyContract!==""&&finalParameters.get.companyContract!==false||typeof finalParameters.get.companyId!=="undefined"&&finalParameters.get.companyId!==""&&finalParameters.get.companyId!==false){finalParameters.get.goto="wl_intpartner_search"}if(typeof window.AccorBooking_GUA_ClientId!=="undefined"){finalParameters.get.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"){finalParameters.get._ga=window.AccorBooking_GUA_linkerParam}if(typeof _AccorTrackingDecorator!=="undefined"&&typeof _AccorTrackingDecorator.decorateObject==="function"){finalParameters.get=_AccorTrackingDecorator.decorateObject(finalParameters.get)}if(typeof finalParameters.config.disableUtmParameters!=="undefined"&&finalParameters.config.disableUtmParameters){var paramsToRemove=["utm_source","utm_medium","utm_campaign"];for(var i=0;i<paramsToRemove.length;i++){var key=paramsToRemove[i];if(typeof finalParameters.get[key]!=="undefined"){delete finalParameters.get[key]}}}if(typeof finalParameters.get._ga!=="undefined"&&finalParameters.get._ga===false||typeof finalParameters.get.gacid!=="undefined"&&finalParameters.get.gacid===false){if(typeof window.AccorBooking_GUA_ClientId!=="undefined"&&window.AccorBooking_GUA_ClientId!=""){log("lastChance Decorate gacid");finalParameters.get.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"&&window.AccorBooking_GUA_linkerParam!=""){log("lastChance Decorate _ga");finalParameters.get._ga=window.AccorBooking_GUA_linkerParam}}if(typeof __AccorFilterBookingParams==="function"){finalParameters=__AccorFilterBookingParams(finalParameters)}if(isMobile()){full_url=finalParameters.config.baseUrlMobile+"?"+buildQueryString(finalParameters.get)}else{full_url=finalParameters.config.baseUrl+"?"+buildQueryString(finalParameters.get)}if(typeof finalParameters.get.preferredCode!=="undefined"&&finalParameters.get.preferredCode!==false&&finalParameters.get.preferredCode.indexOf("|")!==-1){doMultiTkCodeRequest(finalParameters)}else{log("Accor Booking final parameters:",finalParameters);log("Accor Booking full url",full_url);gotoBE(full_url,{},finalParameters.config.formTarget)}};window.frhiBookNow=function(params){var zPad=function(s){s=""+s;return s.length==1?"0"+s:s};var fieldMapping=[{accor:"adultNumber",frhi:"na",default:"1",required:true},{accor:"childrenNumber",frhi:"nc",required:false},{accor:"destination",frhi:"hc",default:accorBookingArgs.destination,required:true},{accor:"preferredCode",frhi:"ic",required:false},{accor:"nightNb",frhi:"nn",default:1,required:true},{accor:"roomNumber",frhi:"rooms",default:1,required:false},{accor:"childrenAge0",frhi:"r1ca1",default:1,required:false},{accor:"childrenAge1",frhi:"r1ca2",default:1,required:false},{accor:"childrenAge2",frhi:"r1ca3",default:1,required:false},{accor:"frhiOfferCode",frhi:"pc",default:"",required:false}];for(var k=0;k<4;k++){var frhik=k+1;fieldMapping.push({accor:"room["+k+"].adultNumber",frhi:k===0?"na":"r"+frhik+"na",default:2,required:k===0});fieldMapping.push({accor:"room["+k+"].childrenNumber",frhi:k===0?"nc":"r"+frhik+"nc",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[0]",frhi:"r"+frhik+"ca1",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[1]",frhi:"r"+frhik+"ca2",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[2]",frhi:"r"+frhik+"ca3",default:0,required:false})}var frhiArgs={};for(var i=0;i<fieldMapping.length;i++){var mapping=fieldMapping[i];if(typeof params[mapping.accor]!=="undefined"){frhiArgs[mapping.frhi]=params[mapping.accor]}else{if(mapping.required&&typeof frhiArgs[mapping.frhi]==="undefined"){frhiArgs[mapping.frhi]=mapping.default}}}var checkin_date=new Date;if(typeof params.dayIn!=="undefined"&&typeof params.monthIn!=="undefined"&&typeof params.yearIn!=="undefined"){var parts={day:parseInt(params.dayIn,10),month:parseInt(params.monthIn,10),year:parseInt(params.yearIn,10)};if(parts.day>0&&parts.day<32&&parts.month>0&&parts.month<13&&parts.year>2017){checkin_date=new Date(parts.year,parts.month-1,parts.day,0,0,0,0)}}if(params.brand==="raffles"||params.brand=="fairmont"||params.brand=="swissotel"){frhiArgs.ad=zPad(checkin_date.getDate())+"/"+zPad(checkin_date.getMonth()+1)+"/"+checkin_date.getFullYear()}else{frhiArgs.ad=zPad(checkin_date.getMonth()+1)+"/"+zPad(checkin_date.getDate())+"/"+checkin_date.getFullYear()}frhiArgs.rooms=frhiArgs.rooms||1;if(typeof window.AccorBooking_GUA_ClientId!=="undefined"){frhiArgs.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"){frhiArgs._ga=window.AccorBooking_GUA_linkerParam}if(typeof defaults.get.sourceid!=="undefined"){frhiArgs.sourceid=defaults.get.sourceid}if(typeof defaults.get.merchantid!=="undefined"){frhiArgs.merchantid=defaults.get.merchantid}if(typeof _AccorTrackingDecorator!=="undefined"&&typeof _AccorTrackingDecorator.decorateObject==="function"){var tmp=_AccorTrackingDecorator.decorateObject({});if(typeof tmp._gl!=="undefined"){frhiArgs._gl=tmp._gl}}var language=params.code_langue||"gb";var base_url=false;if(params.brand==="swissotel"){switch(language){case"gb":base_url="https://www.swissotel.com";break;case"de":base_url="https://www.swissotel.de";break;case"fr":base_url="https://www.swissotel.fr";break;case"tr":base_url="https://www.swissotel.com.tr";break;case"ru":base_url="https://www.swissotel-hotels.ru";break;case"ar":base_url="https://www.swissotel.ae";break;case"zh-hans":base_url="https://www.swissotel.cn";break;case"zh-hant":base_url="https://www.swissotel.cn";break;case"ja":base_url="https://www.swissotel.jp";break;case"jp":base_url="https://www.swissotel.jp";break;default:base_url="https://www.swissotel.com";break}}else if(params.brand==="raffles"){switch(language){case"gb":base_url="https://www.raffles.com";break;case"de":base_url="https://www.raffles-hotels.de";break;case"fr":base_url="https://www.raffles.fr";break;case"tr":base_url="https://www.raffles-tr.com";break;case"ru":base_url="https://www.raffles.ru";break;case"ar":base_url="https://www.raffles-ae.com";break;case"zh-hans":base_url="https://www.raffles-cn.com";break;case"ja":base_url="https://www.raffles.jp";break;case"jp":base_url="https://www.raffles.jp";break;default:base_url="https://www.raffles.com";break}}else if(params.brand==="fairmont"){switch(language){case"gb":base_url="https://www.fairmont.com";break;case"de":base_url="https://www.fairmont.de";break;case"fr":base_url="https://www.fairmont.fr";break;case"tr":base_url="https://www.fairmont-tr.com";break;case"ru":base_url="https://www.fairmont-ru.com";break;case"ar":base_url="https://www.fairmont.ae";break;case"zh-hans":base_url="https://www.fairmont.cn";break;case"pt-br":case"br":base_url="https://www.fairmont.net.br";break;case"es":base_url="https://www.fairmont.mx";break;case"ja":base_url="https://www.fairmont.jp";break;case"jp":base_url="https://www.fairmont.jp";break;default:base_url="https://www.fairmont.com";break}}else{alert(params.brand+" integration not available yet.");return}if(base_url){if(params.brand==="fairmont"||typeof params.frhiGoToStep1!=="undefined"&&params.frhiGoToStep1){base_url+="/reservations/check-availability/"}else{base_url+="/reservations/select-room/"}windowOpen(base_url,frhiArgs)}};window.rafflesRevRaiseBookNow=function(params){var zPad=function(s){s=""+s;return s.length==1?"0"+s:s};var defaultDestination=accorBookingArgs.destination;var fieldMapping=[{accor:"adultNumber",rr:"adults",default:"1",required:true},{accor:"childrenNumber",rr:"children",required:false},{accor:"destination",rr:null},{accor:"preferredCode",rr:"promo",required:false},{accor:"nightNb",rr:null},{accor:"roomNumber",rr:"rooms",default:1,required:false},{accor:"childrenAge0",rr:"child_age[0][0]",default:0,required:false},{accor:"childrenAge1",rr:"child_age[0][1]",default:0,required:false},{accor:"childrenAge2",rr:"child_age[0][2]",default:0,required:false},{accor:"frhiOfferCode",rr:"pc",default:"",required:false}];for(var k=0;k<4;k++){fieldMapping.push({accor:"room["+k+"].adultNumber",rr:"adults["+k+"]",default:2,required:k===0});fieldMapping.push({accor:"room["+k+"].childrenNumber",rr:"children["+k+"]",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[0]",rr:"child_age["+k+"][0]",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[1]",rr:"child_age["+k+"][1]",default:0,required:false});fieldMapping.push({accor:"room["+k+"].childrenAge[2]",rr:"child_age["+k+"][2]",default:0,required:false})}var rrArgs={};var rrArgsQS={};for(var i=0;i<fieldMapping.length;i++){var mapping=fieldMapping[i];if(typeof params[mapping.accor]!=="undefined"&&mapping.rr!==null){rrArgs[mapping.rr]=params[mapping.accor];console.log("Found accor "+mapping.accor,"value "+params[mapping.accor],"becomes "+mapping.rr,rrArgs)}else{if(mapping.required&&typeof rrArgs[mapping.rr]==="undefined"){console.log("FallbackToDefault ",mapping);rrArgs[mapping.rr]=mapping.default}}}var checkin_date=new Date;if(typeof params.dayIn!=="undefined"&&typeof params.monthIn!=="undefined"&&typeof params.yearIn!=="undefined"){var parts={day:parseInt(params.dayIn,10),month:parseInt(params.monthIn,10),year:parseInt(params.yearIn,10)};if(parts.day>0&&parts.day<32&&parts.month>0&&parts.month<13&&parts.year>2017){checkin_date=new Date(parts.year,parts.month-1,parts.day,0,0,0,0)}}rrArgs.arrive=zPad(checkin_date.getMonth()+1)+"/"+zPad(checkin_date.getDate())+"/"+checkin_date.getFullYear();var nights=1;if(typeof params.nightNb!=="undefined"){nights=Math.abs(parseInt(params.nightNb,10))}var checkout_date=new Date(checkin_date.getTime()+864e5*nights);rrArgs.depart=zPad(checkout_date.getMonth()+1)+"/"+zPad(checkout_date.getDate())+"/"+checkout_date.getFullYear();rrArgs.rooms=rrArgs.rooms||1;if(typeof window.AccorBooking_GUA_ClientId!=="undefined"){rrArgsQS.gacid=window.AccorBooking_GUA_ClientId}if(typeof window.AccorBooking_GUA_linkerParam!=="undefined"){rrArgsQS._ga=window.AccorBooking_GUA_linkerParam}if(typeof defaults.get.sourceid!=="undefined"){rrArgsQS.sourceid=defaults.get.sourceid}if(typeof defaults.get.merchantid!=="undefined"){rrArgsQS.merchantid=defaults.get.merchantid}if(typeof _AccorTrackingDecorator!=="undefined"&&typeof _AccorTrackingDecorator.decorateObject==="function"){var tmp=_AccorTrackingDecorator.decorateObject({});if(typeof tmp._gl!=="undefined"){rrArgsQS._gl=tmp._gl}}var language=params.code_langue||"en";if(language=="gb"){language="en"}var base_url=false;var raffles_mapping=[{"D-Edge site":"https://www.leroyalmonceau.com/","Hotel name":"Le Royal Monceau - Raffles Paris","Former Raffles Hotel ID":"RMO","Accor Hotel ID":"A5D5","Base URL":"/paris/",en:"y",de:"y",ru:"y",ja:"y",zh:"y"},{"D-Edge site":"https://www.rafflesistanbul.com","Hotel name":"Raffles Istanbul","Former Raffles Hotel ID":"RIS","Accor Hotel ID":"A5E2","Base URL":"/istanbul/",en:"y",ru:"y",fr:"y",tr:"y",zh:"y",es:"y"},{"Hotel name":"Raffles Europejski Warsaw","Former Raffles Hotel ID":"RWW","Accor Hotel ID":"A7W6","Base URL":"/warsaw/",en:"y",de:"y",fr:"y",es:"y"},{"Hotel name":"Raffles London at The OWO","Accor Hotel ID":"B1C0","Base URL":"/london/",en:"y"},{"Hotel name":"Raffles Shenzhen","Former Raffles Hotel ID":"RSZ","Accor Hotel ID":"A7Z7","Base URL":"/shenzhen/",en:"y",ja:"y",zh:"y"},{"Hotel name":"Raffles Hainan Clear Water Bay","Former Raffles Hotel ID":"RSA","Accor Hotel ID":"A5D7","Base URL":"/hainan/",en:"y",de:"y",ru:"y",fr:"y",zh:"y"},{"D-Edge site":"https://www.rafflessingapore.com","Hotel name":"Raffles Singapore","Former Raffles Hotel ID":"RHS","Accor Hotel ID":"A5E1","Base URL":"/singapore/",en:"y",ja:"y",zh:"y"},{"D-Edge site":"https://www.rafflesphnompenh.com","Hotel name":"Raffles Hotel Le Royal","Former Raffles Hotel ID":"RLR","Accor Hotel ID":"A5E0","Base URL":"/phnom-penh/",en:"y",ja:"y",zh:"y"},{"D-Edge site":"https://www.rafflessiemreap.com","Hotel name":"Raffles Grand Hotel D'Angkor","Former Raffles Hotel ID":"RGA","Accor Hotel ID":"A5D9","Base URL":"/siem-reap/",en:"y",ja:"y",zh:"y",es:"y"},{"Hotel name":"Raffles Makati","Former Raffles Hotel ID":"RMN","Accor Hotel ID":"A5E3","Base URL":"/makati/",en:"y"},{"Hotel name":"Raffles Udaipur","Accor Hotel ID":"B068","Base URL":"/udaipur/",en:"y"},{"D-Edge site":"https://www.rafflesbali.com","Hotel name":"Raffles Bali","Former Raffles Hotel ID":"RBL","Accor Hotel ID":"B695","Base URL":"/bali/",en:"y"},{"D-Edge site":"https://www.rafflesjakarta.com","Hotel name":"Raffles Jakarta","Former Raffles Hotel ID":"RJK","Accor Hotel ID":"A5Y7","Base URL":"/jakarta/",en:"y",ja:"y",zh:"y"},{"D-Edge site":"https://rafflesmaldives.com","Hotel name":"Raffles Maldives Meradhoo","Former Raffles Hotel ID":"RMM","Accor Hotel ID":"B1Y8","Base URL":"/maldives/",en:"y",de:"y",ru:"y",fr:"y"},{"D-Edge site":"https://www.raffles-seychelles.com","Hotel name":"Raffles Seychelles","Former Raffles Hotel ID":"RPS","Accor Hotel ID":"A5E5","Base URL":"/seychelles/",en:"y",fr:"y",zh:"y"},{"Hotel name":"Raffles Doha","Former Raffles Hotel ID":"RDOH","Accor Hotel ID":"B662","Base URL":"/doha/",en:"y",ru:"y",es:"y"},{"Hotel name":"Raffles Makkah Palace","Former Raffles Hotel ID":"RMH","Accor Hotel ID":"A5E4","Base URL":"/makkah/",en:"y",ru:"y",tr:"y"},{"D-Edge site":"https://www.raffles-dubai.com","Hotel name":"Raffles Dubai","Former Raffles Hotel ID":"RDB","Accor Hotel ID":"A5D8","Base URL":"/dubai/",en:"y"},{"D-Edge site":"https://www.rafflesthepalmdubai.com","Hotel name":"Raffles The Palm Dubai","Accor Hotel ID":"B8Y0","Base URL":"/thepalm-dubai/",en:"y",ru:"y"},{"Hotel name":"Raffles Boston","Former Raffles Hotel ID":"RBO","Accor Hotel ID":"B3X2","Base URL":"/boston/",en:"y"}];var possible_languages=["en","de","ru","ja","fr","tr","zh","es","ar","pl","kh","ko"];var destination=params.destination||defaultDestination;destination=destination.toUpperCase();for(var i=0;i<raffles_mapping.length;i++){var item=raffles_mapping[i];var the_language="en";if(item["Accor Hotel ID"]==destination||item["Former Raffles Hotel ID"]==destination){if(possible_languages.indexOf(language)!==-1){if(typeof item[language]!=="undefined"&&item[language]=="y"){the_language=language}}base_url="https://www.raffles.com"+(the_language=="en"?"":"/"+the_language)+item["Base URL"]+"booking/";break}}if(base_url){var final_url=base_url+"?"+buildQueryString(rrArgsQS)+"#/booking/step-2?"+buildQueryString(rrArgs);windowOpen(final_url,{})}else{alert("The hotel ID was not recognized. Please contact D-Edge")}};$.fn.accorBookingForm=function(abfArgs){abfArgs=abfArgs||{};abfArgs=$.extend(true,{maxRooms:3,maxChildren:3},abfArgs);var form=this,checkin_dp=form.find("input[name=checkin]"),checkout_dp=form.find("input[name=checkout]"),room_number_selector=form.find("select[name=roomNumber]"),rooms_container=form.find(".bf_roomscontainer"),room_template_container=form.find("#bf_room_fields_template"),room_template,bind_children_num_change;bind_children_num_change=function(){var children_number_selector=rooms_container.find("select[name$=childrenNumber]");children_number_selector.change(function(){var selector=$(this),nchildren=selector.val(),k,room_container=selector.closest(".bf_room_container"),children_container=room_container.find(".bf_childrenages"),age_selector;for(k=0;k<abfArgs.maxChildren;k++){age_selector=children_container.find(".bf_field.bf_select").eq(k);if(k>=nchildren){age_selector.val(0);age_selector.hide()}else{age_selector.show()}}});children_number_selector.each(function(){$(this).trigger("change")})};if(form.hasClass("bf_multiroom")&&room_template_container.length>0){room_template=room_template_container.text();room_number_selector.change(function(){var selector=$(this),nrooms=selector.val(),i,room_html,room_container,children_number_selector;for(i=0;i<abfArgs.maxRooms;i++){room_container=rooms_container.find(".bf_room_"+i+"_container");if(room_container.length>0){if(i>=nrooms){room_container.remove()}}else{if(i<nrooms){room_html=room_template.replace(/_NNN_/g,"_"+i+"_");room_html=room_html.replace(/\[NNN]/g,"["+i+"]");room_html=room_html.replace(/\{NNN}/g,i+1);rooms_container.append(room_html)}}}bind_children_num_change()});room_number_selector.trigger("change")}form.submit(function(e){e.preventDefault();form.trigger("accor_event.booking_form_submit");var fields=form.serializeArray();var formParameters={};var checkin_date;var checkout_date;var excludeFields=["checkin","checkout","booknow"];for(var i=0;i<fields.length;i++){var field=fields[i];if(excludeFields.indexOf(field.name)===-1){formParameters[field.name]=field.value}}if(checkin_dp.length>0&&checkout_dp.length>0){if(checkin_dp.prop("type")=="date"&&checkout_dp.prop("type")=="date"){if(typeof checkin_dp.get(0).valueAsDate!=="undefined"&&typeof checkout_dp.get(0).valueAsDate!=="undefined"){checkin_date=checkin_dp.get(0).valueAsDate;checkout_date=checkout_dp.get(0).valueAsDate}}else{if(typeof $.fn.datepicker!=="undefined"){checkin_date=checkin_dp.datepicker("getDate");checkout_date=checkout_dp.datepicker("getDate")}}if(typeof checkin_date==="undefined"&&typeof checkout_date==="undefined"){checkin_date=new Date(checkin_dp.val());checkout_date=new Date(checkout_dp.val())}if(checkout_date>checkin_date){formParameters.yearIn=checkin_date.getFullYear();formParameters.monthIn=checkin_date.getMonth()+1;formParameters.dayIn=checkin_date.getDate();formParameters.nightNb=dateDiffInDays(checkin_date,checkout_date)}}if(typeof abfArgs.altSubmitAction==="function"){return abfArgs.altSubmitAction(formParameters)}accorBookNow(formParameters)})};$.fn.accorBookNowLink=function(){var links=this;return links.each(function(){var link=$(this);link.click(function(e){e.preventDefault();e.stopPropagation();link.trigger("accor_event.booknowlink");var args=fixParameterNameFromDataAttribute(link.data());if($("html").hasClass("mobile")&&typeof accorMobileOpenQS!=="undefined"){accorMobileOpenQS("link",link)}else{accorBookNow(args)}})})};$.fn.accorBookingInitDatepickers=function(checkin_args,checkout_args){checkin_args=checkin_args||{};checkout_args=checkout_args||{};var form=this,checkin_mindate=new Date,checkout_mindate=new Date(checkin_mindate.getTime()+864e5),settings=form.data(),minstay=1,checkin_dp,checkout_dp,checkin_defaults,checkout_defaults,checkin_params,checkout_params,checkin_maxdate,checkout_maxdate;checkout_maxdate=new Date((new Date).getTime()+405*864e5);checkin_dp=form.find("input[name=checkin]");checkout_dp=form.find("input[name=checkout]");if(checkin_dp.length==0||checkout_dp.length==0){log("input[name=checkin] or input[name=checkout] not found");return}if(typeof $.fn.datepicker==="undefined"){log("Query datepicker not found");return}if(typeof settings.minstay!=="undefined"){minstay=parseInt(settings.minstay,10)}if(typeof settings.maxdate!=="undefined"){checkout_maxdate=new Date(parseInt(settings.maxdate,10)*1e3)}checkin_maxdate=new Date(checkout_maxdate.getTime()-864e5*minstay);if(typeof settings.checkintimestamp!=="undefined"){checkin_mindate=new Date(parseInt(settings.checkintimestamp,10)*1e3)}checkin_defaults={minDate:checkin_mindate};if(checkin_maxdate){checkin_defaults.maxDate=checkin_maxdate}checkin_params=$.extend(checkin_defaults,checkin_args);checkin_dp.datepicker(checkin_params);checkin_dp.datepicker("setDate",checkin_params.minDate);if(typeof settings.checkouttimestamp!=="undefined"){checkout_mindate=new Date(parseInt(settings.checkouttimestamp,10)*1e3)}checkout_defaults={minDate:checkout_mindate};if(checkout_maxdate){checkout_defaults.maxDate=checkout_maxdate}checkout_params=$.extend(checkout_defaults,checkout_args);checkout_dp.datepicker(checkout_params);checkout_dp.datepicker("setDate",checkout_params.minDate);checkin_dp.on("change",function(){var mincheckout,checkin_date,checkout_date,absmaxcheckout,relmaxcheckout,maxcheckout;checkin_date=checkin_dp.datepicker("getDate");checkout_date=checkout_dp.datepicker("getDate");mincheckout=new Date(checkin_date.getTime()+864e5*minstay);relmaxcheckout=new Date(checkin_date.getTime()+864e5*30);if(checkout_maxdate&&checkout_maxdate<relmaxcheckout){relmaxcheckout=checkout_maxdate}absmaxcheckout=new Date((new Date).getTime()+864e5*405);maxcheckout=absmaxcheckout>relmaxcheckout?relmaxcheckout:absmaxcheckout;checkout_dp.datepicker("option","minDate",mincheckout);checkout_dp.datepicker("option","maxDate",maxcheckout);if(checkout_date<=checkin_date){checkout_dp.datepicker("setDate",mincheckout)}});checkout_dp.on("change",function(){var maxcheckin,checkin_date,checkout_date;checkin_date=checkin_dp.datepicker("getDate");checkout_date=checkout_dp.datepicker("getDate");if(checkin_date>=checkout_date){maxcheckin=new Date(checkout_date.getTime()-864e5*minstay);checkin_dp.datepicker("option","minDate",maxcheckin);checkin_dp.datepicker("setDate",maxcheckin)}})};$.fn.accorBookingInitSingleDatepicker=function(args,dates_callback){args=args||{};dates_callback=dates_callback||function(checkin,checkout,number_of_nights,argsObj){};var form=this,checkin_mindate=new Date,checkout_mindate=new Date(checkin_mindate.getTime()+864e5),settings=form.data(),minstay=1,defaults,inlinedp,inlinedp_args,checkout_maxdate,cur=-1,prv=-1,lastHoveredDate=false,checkin_date_input,checkout_date_input;defaults={dateFormat:"dd/mm/yy",checkinDateSelector:"input[name=checkin]",checkoutDateSelector:"input[name=checkout]",nightNb:"input[name=nightNb]",yearIn:"input[name=yearIn]",monthIn:"input[name=monthIn]",dayIn:"input[name=dayIn]",inlineDpSelector:"div.checkinout",startDate:"#startDate",endDate:"#endDate",inlineDpArgs:{}};args=$.extend(defaults,args);checkout_maxdate=new Date((new Date).getTime()+405*864e5);checkin_date_input=form.find(args.checkinDateSelector);checkout_date_input=form.find(args.checkoutDateSelector);var nb_nights_input=form.find(args.nightNb);var year_in_input=form.find(args.yearIn);var month_in_input=form.find(args.monthIn);var day_in_input=form.find(args.dayIn);if(checkin_date_input.length==0||checkout_date_input.length==0){log(args.checkinDateSelector+" or "+args.checkoutDateSelector+" not found");return}if(typeof $.fn.datepicker==="undefined"){log("jQuery datepicker not found");return}if(typeof settings.minstay!=="undefined"){minstay=parseInt(settings.minstay,10);checkout_mindate=new Date(checkin_mindate.getTime()+864e5*minstay)}if(typeof settings.maxdate!=="undefined"){checkout_maxdate=new Date(parseInt(settings.maxdate,10)*1e3)}if(typeof settings.checkintimestamp!=="undefined"){checkin_mindate=new Date(parseInt(settings.checkintimestamp,10)*1e3);checkout_mindate=new Date(checkin_mindate.getTime()+864e5*minstay)}if(checkin_date_input.get(0).tagName=="input"){checkin_date_input.val($.datepicker.formatDate(args.dateFormat,checkin_mindate,{}))}else{checkin_date_input.html($.datepicker.formatDate(args.dateFormat,checkin_mindate,{}))}if(checkout_date_input.get(0).tagName=="input"){checkout_date_input.val($.datepicker.formatDate(args.dateFormat,checkout_mindate,{}))}else{checkout_date_input.html($.datepicker.formatDate(args.dateFormat,checkout_mindate,{}))}$(args.startDate).text($.datepicker.formatDate(args.dateFormat,checkin_mindate,{}));$(args.endDate).text($.datepicker.formatDate(args.dateFormat,checkout_mindate,{}));inlinedp_args=$.extend(defaults.inlineDpArgs,{numberOfMonths:2,minDate:checkin_mindate,maxDate:checkout_maxdate,beforeShowDay:function(date){var cell_class="";if($(args.startDate).data("date")){var _st=$(args.startDate).data("date")||getComparableDate(new Date);var _en=$(args.endDate).data("date")||getComparableDate(new Date((new Date).getTime()+864e5));var comparableDate=getComparableDate(date);if(comparableDate==_st){cell_class="date-range-selected checkin-date"}else if(comparableDate==_en){cell_class="date-range-selected checkout-date"}else if(comparableDate>_st&&comparableDate<_en){cell_class="date-range-selected"}}else{$(args.startDate).text($.datepicker.formatDate(args.dateFormat,checkin_mindate));$(args.startDate).data("date",getComparableDate(checkin_mindate))}return[true,cell_class]},onSelect:function(dateText,inst){var arrival_date,departure_date,diff,returnedData={};prv=cur;cur=new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay).getTime();if(prv==-1||prv==cur){form.addClass("on-selection").removeClass("selection-finished");prv=cur;var dateStart=$(this).datepicker("getDate")||new Date;var after30Days=new Date(dateStart.getTime()+30*864e5);var maxCheckoutDate=after30Days;if(settings.maxdate>0&&settings.maxdate*1e3<after30Days.getTime()){maxCheckoutDate=new Date(settings.maxdate*1e3)}$(this).datepicker("option","maxDate",maxCheckoutDate);year_in_input.val(dateStart.getFullYear());month_in_input.val(dateStart.getMonth()+1);day_in_input.val(dateStart.getDate());nb_nights_input.val("1");var dateStartFormatted=$.datepicker.formatDate(args.dateFormat,dateStart);var dateEnd=new Date(dateStart.getTime()+864e5);var dateEndFormatted=$.datepicker.formatDate(args.dateFormat,dateEnd);$(args.startDate).text(dateStartFormatted);$(args.startDate).data("date",getComparableDate(dateStart));$(args.endDate).text(dateEndFormatted);$(args.endDate).data("date",getComparableDate(dateEnd))}else{$(this).datepicker("option","maxDate",checkout_maxdate);form.removeClass("on-selection").addClass("selection-finished");returnedData.arrivalDateObj=new Date(Math.min(prv,cur));returnedData.departureDateObj=new Date(Math.max(prv,cur));arrival_date=$.datepicker.formatDate(args.dateFormat,returnedData.arrivalDateObj,{});departure_date=$.datepicker.formatDate(args.dateFormat,returnedData.departureDateObj,{});diff=Math.abs(Math.round((cur-prv)/(24*60*60*1e3)));$(args.startDate).text(arrival_date);$(args.startDate).data("date",getComparableDate(returnedData.arrivalDateObj));$(args.endDate).text(departure_date);$(args.endDate).data("date",getComparableDate(returnedData.departureDateObj));if(checkin_date_input.get(0).tagName=="input"){checkin_date_input.val(arrival_date)}else{checkin_date_input.html(arrival_date)}if(checkout_date_input.get(0).tagName=="input"){checkout_date_input.val(departure_date)}else{checkout_date_input.html(departure_date)}nb_nights_input.val(diff);year_in_input.val(returnedData.arrivalDateObj.getFullYear());month_in_input.val(returnedData.arrivalDateObj.getMonth()+1);day_in_input.val(returnedData.arrivalDateObj.getDate());prv=-1;cur=-1}}});inlinedp=$(args.inlineDpSelector);if(inlinedp.length>0){inlinedp.datepicker(inlinedp_args);year_in_input.val(checkin_mindate.getFullYear());month_in_input.val(checkin_mindate.getMonth()+1);day_in_input.val(checkin_mindate.getDate());nb_nights_input.val(minstay)}function getDpCellDate(cell){var month,year,day;year=parseInt(cell.data("year"),10);month=parseInt(cell.data("month"),10);day=parseInt(cell.text(),10);if(year>2015&&month>=0&&month<12&&day>0&&day<=31){return new Date(year,month,day,0,0,0,0)}return false}$(document).on("mouseenter",args.inlineDpSelector+" table.ui-datepicker-calendar tbody td a",function(){lastHoveredDate=getDpCellDate($(this).parent())});$(document).on("mouseleave","table.ui-datepicker-calendar tbody",function(){lastHoveredDate=false});function cleanDateRange(){var scope=args.inlineDpSelector+" ";$(scope+"table.ui-datepicker-calendar tbody td.date-range-inselection").removeClass("date-range-inselection");$(scope+"table.ui-datepicker-calendar tbody td.date-range-selection-warning").removeClass("date-range-selection-warning")}function preSelectDateRange(min,max){var num_nights=Math.abs(Math.round((max.getTime()-min.getTime())/(24*60*60*1e3)));$(args.inlineDpSelector+" table.ui-datepicker-calendar tbody td").each(function(){var cell=$(this),date=getDpCellDate(cell),classToAdd="date-range-inselection";if(num_nights<minstay){classToAdd="date-range-selection-warning"}if(date>=min&&date<=max){if(date>checkout_maxdate){cell.addClass("date-range-selection-warning")}else{cell.removeClass("date-range-selection-warning").addClass(classToAdd)}}else{cell.removeClass("date-range-inselection");cell.removeClass("date-range-selection-warning")}})}setInterval(function(){var checkin;if(lastHoveredDate==false){cleanDateRange();return}if(cur!=-1&&cur==prv){checkin=new Date(parseInt(cur,10));if(lastHoveredDate>checkin||lastHoveredDate<checkin){preSelectDateRange(checkin,lastHoveredDate)}else{cleanDateRange();return}}else{cleanDateRange();return}},100)};$(document).trigger("accor_booking_loaded")})(jQuery);